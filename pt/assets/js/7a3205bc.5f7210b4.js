"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[23380],{103049:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>i,contentTitle:()=>t,default:()=>m,frontMatter:()=>d,metadata:()=>r,toc:()=>l});var a=s(474848),n=s(28453);const d={id:"get-database-measures",title:"Get database measures",slug:"/commands/get-database-measures",displayed_sidebar:"docs"},t=void 0,r={id:"commands-legacy/get-database-measures",title:"Get database measures",description:"Get database measures {( opcoes )} -> Resultado",source:"@site/i18n/pt/docusaurus-plugin-content-docs/current/commands-legacy/get-database-measures.md",sourceDirName:"commands-legacy",slug:"/commands/get-database-measures",permalink:"/docs/pt/next/commands/get-database-measures",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fget-database-measures.md%20(current)&body=Please%20enter%20your%20comment%3A",tags:[],version:"current",frontMatter:{id:"get-database-measures",title:"Get database measures",slug:"/commands/get-database-measures",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"Get database localization",permalink:"/docs/pt/next/commands/get-database-localization"},next:{title:"Get database parameter",permalink:"/docs/pt/next/commands/get-database-parameter"}},i={},l=[{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:4},{value:"Apresenta\xe7\xe3o do objeto devolvido",id:"apresenta\xe7\xe3o-do-objeto-devolvido",level:5},{value:"Propriedades elementares",id:"propriedades-elementares",level:5},{value:"dataSegment1 e indexSegment",id:"datasegment1-e-indexsegment",level:5},{value:"tables",id:"tables",level:5},{value:"indexes",id:"indexes",level:5},{value:"Par\xe2metro op\xe7\xf5es",id:"par\xe2metro-op\xe7\xf5es",level:5},{value:"Cliente/servidor e componentes",id:"clienteservidor-e-componentes",level:5},{value:"Exemplo 1",id:"exemplo-1",level:4},{value:"Exemplo 2",id:"exemplo-2",level:4},{value:"Exemplo 3",id:"exemplo-3",level:4}];function c(e){const o={br:"br",code:"code",em:"em",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Get database measures"})," {( ",(0,a.jsx)(o.em,{children:"opcoes"})," )} -> Resultado"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(o.table,{children:[(0,a.jsx)(o.thead,{children:(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.th,{children:"Par\xe2metro"}),(0,a.jsx)(o.th,{children:"Tipo"}),(0,a.jsx)(o.th,{}),(0,a.jsx)(o.th,{children:"Descri\xe7\xe3o"})]})}),(0,a.jsxs)(o.tbody,{children:[(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:"opcoes"}),(0,a.jsx)(o.td,{children:"Objeto"}),(0,a.jsx)(o.td,{children:"\ud83e\udc52"}),(0,a.jsx)(o.td,{children:"Op\xe7\xf5es de retorno"})]}),(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:"Resultado"}),(0,a.jsx)(o.td,{children:"Objeto"}),(0,a.jsx)(o.td,{children:"\ud83e\udc50"}),(0,a.jsx)(o.td,{children:"Objeto que cont\xe9m as medidas da base"})]})]})]}),"\n",(0,a.jsx)(o.h4,{id:"descri\xe7\xe3o",children:"Descri\xe7\xe3o"}),"\n",(0,a.jsxs)(o.p,{children:["O comando ",(0,a.jsx)(o.strong,{children:"Get database measures"})," lhe permite obter informa\xe7\xe3o detalhada sobre os eventos do motor de base de dados 4D. A informa\xe7\xe3o devolvida inclui o acesso leitura/escritura dos dados desde/at\xe9 o disco ou a mem\xf3ria cach\xea, assim como tamb\xe9m o acesso aos \xedndices da base de dados, as pesquisas e as ordena\xe7\xf5es."]}),"\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Get database measures"})," devolve um \xfanico objeto que cont\xe9m todas as medidas relevantes. O par\xe2metro ",(0,a.jsx)(o.em,{children:"opcoes"})," lhe permite configurar as op\xe7\xf5es para a informa\xe7\xe3o devolvida."]}),"\n",(0,a.jsx)(o.h5,{id:"apresenta\xe7\xe3o-do-objeto-devolvido",children:"Apresenta\xe7\xe3o do objeto devolvido"}),"\n",(0,a.jsx)(o.p,{children:'O objeto devolvido cont\xe9m uma s\xf3 propriedade chamada "DB", que t\xeam a seguinte estrutura b\xe1sica:'}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-RAW",children:'{\xa0\xa0\xa0 "DB": {\xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "dataSegment1": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "indexSegment": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "tables": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "indexes": {\u2026}\xa0\xa0\xa0 }}\n'})}),"\n",(0,a.jsx)(o.p,{children:'Este objeto est\xe1 composto de oito propriedades que cont\xe9m as medidas b\xe1sicas ("diskReadBytes", "cacheReadBytes", "cacheMissBytes", "diskWriteBytes", "diskReadCount", "cacheReadCount", "cacheMissCount", "diskWriteCount") e propriedades adicionais ("dataSegment1 "," indexSegment ", "tables", "index") que tamb\xe9m podem conter propriedades elementares, mas a um n\xedvel diferente e com um alcance diferente (ver mais a frente).'}),"\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Nota"}),': uma propriedade s\xf3 est\xe1 presente no interior do objeto se este recebe conte\xfado. Quando uma propriedade n\xe3o tem nenhum conte\xfado, n\xe3o est\xe1 inclu\xedda no objeto. Por exemplo, se a base foi aberta em modo de leitura e os \xedndices n\xe3o foram utilizados, o objeto devolvido n\xe3o conter\xe1 "diskWriteBytes", "diskWriteCount", "indexSegment" e "indexes".']}),"\n",(0,a.jsx)(o.h5,{id:"propriedades-elementares",children:"Propriedades elementares"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-undefined",children:'"diskReadBytes": {\n\xa0\xa0\xa0 "value": 33486473620,\n\xa0\xa0\xa0 "history": [\xa0\xa0\xa0 \xa0\xa0\xa0 // optional\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0 {"value": 52564,"time": -1665},\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0 {"value": 54202,"time": -1649},\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \u2026\n\xa0\xa0\xa0 ]\n}\n'})}),"\n",(0,a.jsx)(o.h5,{id:"datasegment1-e-indexsegment",children:"dataSegment1 e indexSegment"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-undefined",children:'{\n"DB": {\n"diskReadBytes": {\n\xa0\xa0\xa0 "value": 718260\n\xa0\xa0\xa0 },\n"diskReadCount": {\n\xa0\xa0\xa0 "value": 229\n\xa0\xa0\xa0 },\n\n"dataSegment1": {\n\xa0\xa0\xa0 "diskReadBytes": {\n\xa0\xa0\xa0 "value": 679092\n\xa0\xa0\xa0 },\n\xa0\xa0\xa0 "diskReadCount": {\n\xa0\xa0\xa0 "value": 212\n\xa0\xa0\xa0 }\n\xa0\xa0\xa0 },\n"indexSegment": {\n\xa0\xa0\xa0 "diskReadBytes": {\n\xa0\xa0\xa0 "value": 39168\n\xa0\xa0\xa0 },\n\xa0\xa0\xa0 "diskReadCount": {\n\xa0\xa0\xa0 "value": 17\n\xa0\xa0\xa0 }\n}\n'})}),"\n",(0,a.jsx)(o.h5,{id:"tables",children:"tables"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-undefined",children:'"tables": {\n\xa0\xa0 \xa0"Employees": {\u2026)\n\xa0\xa0 \xa0"Companies": {\u2026)\n\xa0\xa0 \xa0}\n'})}),"\n",(0,a.jsx)(o.h5,{id:"indexes",children:"indexes"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-undefined",children:'"indexes": {\n\xa0\xa0\xa0 "Employees": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 "EmpLastName": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadBytes": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadBytes": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissBytes": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteBytes": {\u2026},\n\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadCount": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadCount": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissCount": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteCount": {\u2026}\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 \xa0\xa0\xa0 "EmpLastName (Keyword)": {...},\n\xa0\xa0\xa0 \xa0\xa0\xa0 "index3Name": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 "index4Name": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \u2026\n\xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 \xa0\xa0\xa0 "Companies": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "Name": \n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 (...)\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "queryCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 41\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "sortCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 3\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "insertKeyCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 2\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "deleteKeyCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 16\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 table3Name: {\u2026}\n}\n'})}),"\n",(0,a.jsx)(o.h5,{id:"par\xe2metro-op\xe7\xf5es",children:"Par\xe2metro op\xe7\xf5es"}),"\n",(0,a.jsxs)(o.p,{children:["O par\xe2metro ",(0,a.jsx)(o.em,{children:"opcoes"})," lhe permite personalizar a informa\xe7\xe3o real que devolve o comando. Em ",(0,a.jsx)(o.em,{children:"opcoes"}),', se passar um objeto que pode conter at\xe9 tr\xeas propriedades: "withHistory", "historyLength" e "path".']}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(o.table,{children:[(0,a.jsx)(o.thead,{children:(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.th,{children:(0,a.jsx)(o.strong,{children:"Propriedade"})}),(0,a.jsx)(o.th,{children:(0,a.jsx)(o.strong,{children:"Tipo"})}),(0,a.jsx)(o.th,{children:(0,a.jsx)(o.strong,{children:"Descri\xe7\xe3o"})})]})}),(0,a.jsxs)(o.tbody,{children:[(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:'"withHistory"'}),(0,a.jsx)(o.td,{children:"Booleano"}),(0,a.jsx)(o.td,{children:'"true" significa que o objeto "history" ser\xe1 devolvido pela fun\xe7\xe3o dentro do objeto devolvido; "false" significa que o objeto devolvido pela fun\xe7\xe3o n\xe3o ir\xe1 conter o objeto "history"'})]}),(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:'"historyLength"'}),(0,a.jsx)(o.td,{children:"n\xfamero"}),(0,a.jsx)(o.td,{children:"Define o tamanho do array history devolvido em segundos(*)."})]}),(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:'"path"'}),(0,a.jsx)(o.td,{children:"cadeia"}),(0,a.jsx)(o.td,{children:'Rota completa da propriedade espec\xedfica ou arrays de rotas completas das propriedades espec\xedficas que deseja obter. Se passar uma cadeia, s\xf3 o valor correspondente se devolve no objeto "DB" (se a rota \xe9 v\xe1lida). Exemplo "DB.tables.Employees.records.diskWriteBytes". Quando passar um array de cadeias, todos os valores correspondentes s\xe3o devolvidos no objeto "DB" (se as rotas s\xe3o \xe1lidas). Exemplo: ["DB.tables.Employee.records.diskWriteBytes", "DB.tables.Employee.records.diskReadCount","DB.dataSegment1.diskReadBytes"]'})]})]})]}),"\n",(0,a.jsxs)(o.p,{children:['(*) Como se descreveu anteriormente, a hist\xf3ria n\xe3o se armazena como uma sequ\xeancia de segundos, somente com valores relevantes. Se n\xe3o ocorre nada durante um par de segundos ou mais, nada se armazena e uma brecha aparecer\xe1 no array de hist\xf3rico interno. "time" pode conter, por exemplo, -2, -4, -5, -10, -15, -30 com valores de 200, 300, 250, 400, 500,150. Se a propriedade "historyLength" est\xe1 definida em 600 (10 minutos), logo o array devolvido ir\xe1 conter 0, -1, -2, -3 ... -599 para "time" e s\xf3 os valores -2, -4, - 5, -10, -15, -30 ser\xe3o preenchidos. Todos os outros valores ficar\xe3o em 0 (zero) como valor. Tamb\xe9m como foi descrito anteriormente, o \xfanico limite do array interno \xe9 o tamanho (200), n\xe3o o tempo. Isto significa que se h\xe1 uma baixa atividade para uma propriedade espec\xedfica, o tempo mais antigo pode ser bem grande (por exemplo: -3600 faz uma hora). Tamb\xe9m pode conter menos de 200 valores se a base acabou de iniciar. Nestes casos, se o tempo do hist\xf3rico interno \xe9 menor ao solicitado ou se todos os valores importantes que j\xe1 foram definidos no array devolvido, o valor devolvido ser\xe1 -1.',(0,a.jsx)(o.br,{}),'\nExemplo: a base s\xf3 foi iniciada faz 20 segundos e a hist\xf3ria da peti\xe7\xe3o \xe9 de 60 segundos. Os valores devolvidos entre 0 e -20 se definem com valores ou zeros e os outros se estabelecer\xe3o com -1. Quando um valor "-1" se devolve, isto significa que, ou bem o tempo de solicita\xe7\xe3o \xe9 muito antigo ou que o valor j\xe1 n\xe3o est\xe1 no array de hist\xf3ria interna (ou seja, chegou ao limite dos 200 elementos e foram eliminados os valores maiores).']}),"\n",(0,a.jsx)(o.h5,{id:"clienteservidor-e-componentes",children:"Cliente/servidor e componentes"}),"\n",(0,a.jsx)(o.p,{children:"Este comando devolve a informa\xe7\xe3o sobre o uso da base de dados. Isto significa que lhe devolve um objeto v\xe1lido com valores relevantes s\xf3 quando \xe9 chamado:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:"em modo local 4D (se chamado desde um componente, devolve informa\xe7\xe3o sobre a base de dados do host)"}),"\n",(0,a.jsx)(o.li,{children:"no servidor em modo cliente/servidor."}),"\n"]}),"\n",(0,a.jsxs)(o.p,{children:["Se o comando \xe9 chamado desde um 4D remoto, logo o objeto \xe9 deixado vazio.",(0,a.jsx)(o.br,{}),'\nNeste contexto, se necessita obter informa\xe7\xe3o sobre a base de dados no servidor, a forma mais simples de realizar esta a\xe7\xe3o \xe9 criar um m\xe9todo com a op\xe7\xe3o "executar no servidor" ativada.',(0,a.jsx)(o.br,{}),"\nEste princ\xedpio tamb\xe9m funciona para um recipiente: se o componente se utiliza em um contexto local 4D, devolver\xe1 a informa\xe7\xe3o sobre a base local; em um contexto 4D remoto, devolver\xe1 a informa\xe7\xe3o sobre a base do servidor."]}),"\n",(0,a.jsx)(o.h4,{id:"exemplo-1",children:"Exemplo 1"}),"\n",(0,a.jsx)(o.p,{children:'Voc\xea deseja obter o objeto "history" no objeto devolvido:'}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:'\xa0var $param : Object\n\xa0var $measures : Object\n\xa0OB SET($param;"withHistory";True)\n\xa0$measures:=Get database measures($param)\n'})}),"\n",(0,a.jsx)(o.h4,{id:"exemplo-2",children:"Exemplo 2"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-undefined",children:'{\n\xa0\xa0\xa0 "DB": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadBytes": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 9516637\n\xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 }\n}\n'})}),"\n",(0,a.jsx)(o.h4,{id:"exemplo-3",children:"Exemplo 3"}),"\n",(0,a.jsx)(o.p,{children:"Queremos obter as medidas de bytes de cach\xea nos \xfaltimos dois minutos:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:'\xa0var $oParams : Object\n\xa0var $measures : Object\n\xa0OB SET($oParams;"path";"DB.cacheReadBytes")\n\xa0OB SET($oParams;"withHistory";True)\n\xa0OB SET($oParams;"historyLength";2*60)\n\xa0$measures:=Get database measures($oParams)\n'})})]})}function m(e={}){const{wrapper:o}={...(0,n.R)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453:(e,o,s)=>{s.d(o,{R:()=>t,x:()=>r});var a=s(296540);const n={},d=a.createContext(n);function t(e){const o=a.useContext(d);return a.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function r(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),a.createElement(d.Provider,{value:o},e.children)}}}]);