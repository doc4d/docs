/*! For license information please see b6d67fa8.139c8323.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[64173],{521781:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>a});var t=s(474848),o=s(28453);const r={id:"singleton",title:"$singleton"},i=void 0,l={id:"REST/singleton",title:"$singleton",description:"You can directly call exposed functions of your shared singletons through REST.",source:"@site/i18n/ja/docusaurus-plugin-content-docs/current/REST/$singleton.md",sourceDirName:"REST",slug:"/REST/singleton",permalink:"/docs/ja/next/REST/singleton",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20REST%2F%24singleton.md%20(current)&body=Please%20enter%20your%20comment%3A",tags:[],version:"current",frontMatter:{id:"singleton",title:"$singleton"},sidebar:"docs",previous:{title:"$info",permalink:"/docs/ja/next/REST/info"},next:{title:"$upload",permalink:"/docs/ja/next/REST/upload"}},c={},a=[{value:"\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057",id:"\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057",level:2},{value:"\u5f15\u6570",id:"\u5f15\u6570",level:2},{value:"\u4f8b\u984c",id:"\u4f8b\u984c",level:2},{value:"\u30ec\u30b9\u30dd\u30f3\u30b9",id:"\u30ec\u30b9\u30dd\u30f3\u30b9",level:4}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["You can directly call exposed ",(0,t.jsx)(n.a,{href:"/docs/ja/next/Concepts/classes#singleton-classes",children:"functions of your shared singletons"})," through REST."]}),"\n",(0,t.jsxs)(n.p,{children:["Singleton functions are called in POST requests with the ",(0,t.jsx)(n.code,{children:"$singleton"})," command and without ",(0,t.jsx)(n.code,{children:"()"}),". For example, if you have defined a ",(0,t.jsx)(n.code,{children:"buildVehicle()"})," function in the ",(0,t.jsx)(n.code,{children:"VehicleFactory"})," shared singleton class, you could call it using the following request:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:"/rest/$singleton/VehicleFactory/buildVehicle\n"})}),"\n",(0,t.jsx)(n.p,{children:'with data in the body of the POST request: ["truck"]'}),"\n",(0,t.jsx)(n.p,{children:"In 4D language, this call is equivalent to:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'$singleton:=cs.VehicleFactory.me.buildVehicle("truck")\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Keep in mind that only functions with the ",(0,t.jsxs)(n.a,{href:"/docs/ja/next/ORDA/ordaClasses#exposed-vs-non-exposed-functions",children:[(0,t.jsx)(n.code,{children:"exposed"})," keyword"]})," can be directly called from REST requests."]})}),"\n",(0,t.jsx)(n.h2,{id:"\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057",children:"\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057"}),"\n",(0,t.jsxs)(n.p,{children:["Singleton functions must always be called using REST ",(0,t.jsx)(n.strong,{children:"POST"})," requests (a GET request will receive an error). \u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u306f\u6b21\u306e\u901a\u308a\u3067\u3059:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"/rest/$singleton/SingletonClass/SingletonClassFunction"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u6e08\u307f\u30e2\u30fc\u30c9\u3067\u5b9f\u884c\u3055\u308c\u308b\u5834\u5408\u3001REST\u30b5\u30fc\u30d0\u30fc\u306f\u5e38\u306b\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6\u30d7\u30ed\u30bb\u30b9\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u3001REST\u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u547c\u3073\u51fa\u3055\u308c\u308b\u3059\u3079\u3066\u306e 4D\u30b3\u30fc\u30c9\u306f ",(0,t.jsx)(n.strong,{children:"\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u3067\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093"})," (",(0,t.jsxs)(n.a,{href:"/docs/ja/next/WebServer/preemptiveWeb#web%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AB%E3%81%8A%E3%81%84%E3%81%A6%E3%83%97%E3%83%AA%E3%82%A8%E3%83%B3%E3%83%97%E3%83%86%E3%82%A3%E3%83%96%E3%83%A2%E3%83%BC%E3%83%89%E3%82%92%E6%9C%89%E5%8A%B9%E5%8C%96%E3%81%99%E3%82%8B",children:[(0,t.jsx)(n.em,{children:"\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6\u30d7\u30ed\u30bb\u30b9\u3092\u4f7f\u7528"})," \u306e\u8a2d\u5b9a\u5024"]})," \u306f\u3001REST\u30b5\u30fc\u30d0\u30fc\u306b\u3088\u3063\u3066\u7121\u8996\u3055\u308c\u307e\u3059)\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["You can restrict calls to specific singleton functions by configuring appropriate privileges in the ",(0,t.jsx)(n.a,{href:"/docs/ja/next/ORDA/privileges#rolesjson-file",children:(0,t.jsx)(n.strong,{children:"roles.json"})})," file."]})}),"\n",(0,t.jsx)(n.h2,{id:"\u5f15\u6570",children:"\u5f15\u6570"}),"\n",(0,t.jsxs)(n.p,{children:["You can send parameters to singleton functions. On the server side, they will be received in the ",(0,t.jsx)(n.a,{href:"/docs/ja/next/Concepts/parameters#declaring-parameters",children:"declared parameters"})," of the singleton class functions."]}),"\n",(0,t.jsxs)(n.p,{children:["Sending parameters to singleton functions is exactly the same as sending parameter to ORDA class functions. Please refer to ",(0,t.jsxs)(n.a,{href:"/docs/ja/next/REST/classFunctions#parameters",children:["the ",(0,t.jsx)(n.strong,{children:"Parameters"}),' paragraph of the "Calling class functions" page']})," for a detailed description."]}),"\n",(0,t.jsx)(n.h2,{id:"\u4f8b\u984c",children:"\u4f8b\u984c"}),"\n",(0,t.jsx)(n.p,{children:"You have created a simple shared singleton with an exposed function:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'//class mySingleton\n\nshared singleton Class constructor()\n\nexposed Function sayHello ($value : Text)\n\treturn "Hello "+$value\n\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"mySingleton"})," class and ",(0,t.jsx)(n.code,{children:"sayHello"})," function are listed when you call the ",(0,t.jsx)(n.a,{href:"/docs/ja/next/REST/catalog#singleton",children:(0,t.jsx)(n.code,{children:"$catalog"})})," command."]})}),"\n",(0,t.jsx)(n.p,{children:"\u6b21\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"POST"})," ",(0,t.jsx)(n.code,{children:"/rest/$singleton/mySingleton/sayHello"})]}),"\n",(0,t.jsx)(n.p,{children:'Body of the request: ["John"]'}),"\n",(0,t.jsx)(n.h4,{id:"\u30ec\u30b9\u30dd\u30f3\u30b9",children:"\u30ec\u30b9\u30dd\u30f3\u30b9"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n\t"result": "Hello John"\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},221020:(e,n,s)=>{var t=s(296540),o=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function a(e,n,s){var t,r={},a=null,d=null;for(t in void 0!==s&&(a=""+s),void 0!==n.key&&(a=""+n.key),void 0!==n.ref&&(d=n.ref),n)i.call(n,t)&&!c.hasOwnProperty(t)&&(r[t]=n[t]);if(e&&e.defaultProps)for(t in n=e.defaultProps)void 0===r[t]&&(r[t]=n[t]);return{$$typeof:o,type:e,key:a,ref:d,props:r,_owner:l.current}}n.Fragment=r,n.jsx=a,n.jsxs=a},474848:(e,n,s)=>{e.exports=s(221020)},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var t=s(296540);const o={},r=t.createContext(o);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);