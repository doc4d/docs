"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[78406],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>u});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=d(a),u=r,k=m["".concat(s,".").concat(u)]||m[u]||c[u]||l;return a?n.createElement(k,o(o({ref:t},p),{},{components:a})):n.createElement(k,o({ref:t},p))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var d=2;d<l;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},63479:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>p});a(67294);var n=a(3905);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const o={id:"DataStoreClass",title:"DataStore"},i=void 0,s={unversionedId:"API/DataStoreClass",id:"version-19/API/DataStoreClass",title:"DataStore",description:"Un Datastore es el objeto de interfaz suministrado por ORDA para referenciar y acceder a una base de datos. Los objetos Datastore son devueltos por los siguientes comandos:",source:"@site/i18n/es/docusaurus-plugin-content-docs/version-19/API/DataStoreClass.md",sourceDirName:"API",slug:"/API/DataStoreClass",permalink:"/docs/es/19/API/DataStoreClass",draft:!1,tags:[],version:"19",frontMatter:{id:"DataStoreClass",title:"DataStore"},sidebar:"docs",previous:{title:"DataClassAttribute",permalink:"/docs/es/19/API/DataClassAttributeClass"},next:{title:"Email",permalink:"/docs/es/19/API/EmailObjectClass"}},d={},p=[{value:"Resumen",id:"resumen",level:3},{value:"ds",id:"ds",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n",level:4},{value:"Ejemplo 1",id:"ejemplo-1",level:4},{value:"Ejemplo 2",id:"ejemplo-2",level:4},{value:"Open datastore",id:"open-datastore",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-1",level:4},{value:"Ejemplo 1",id:"ejemplo-1-1",level:4},{value:"Ejemplo 2",id:"ejemplo-2-1",level:4},{value:"Ejemplo 3",id:"ejemplo-3",level:4},{value:"Gesti\xf3n de errores",id:"gesti\xf3n-de-errores",level:4},{value:"<em>.dataclassName</em>",id:"dataclassname",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-2",level:4},{value:"Ejemplo",id:"ejemplo",level:4},{value:".cancelTransaction()",id:"canceltransaction",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-3",level:4},{value:"Ejemplo",id:"ejemplo-4",level:4},{value:".encryptionStatus()",id:"encryptionstatus",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-4",level:4},{value:"Ejemplo",id:"ejemplo-5",level:4},{value:".getInfo()",id:"getinfo",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-5",level:4},{value:"Ejemplo 1",id:"ejemplo-1-2",level:4},{value:"Ejemplo 2",id:"ejemplo-2-2",level:4},{value:".getRequestLog()",id:"getrequestlog",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-6",level:4},{value:"Ejemplo",id:"ejemplo-6",level:4},{value:".isAdminProtected()",id:"isadminprotected",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-7",level:4},{value:"Ver tambi\xe9n",id:"ver-tambi\xe9n",level:4},{value:".makeSelectionsAlterable()",id:"makeselectionsalterable",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-8",level:4},{value:".provideDataKey()",id:"providedatakey",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-9",level:4},{value:"Ejemplo",id:"ejemplo-7",level:4},{value:".setAdminProtection()",id:"setadminprotection",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-10",level:4},{value:"Ejemplo",id:"ejemplo-8",level:4},{value:"Ver tambi\xe9n",id:"ver-tambi\xe9n-1",level:4},{value:".startRequestLog()",id:"startrequestlog",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-11",level:4},{value:"Ejemplo 1",id:"ejemplo-1-3",level:4},{value:"Ejemplo 2",id:"ejemplo-2-3",level:4},{value:".startTransaction()",id:"starttransaction",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-12",level:4},{value:"Ejemplo",id:"ejemplo-9",level:4},{value:".stopRequestLog()",id:"stoprequestlog",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-13",level:4},{value:"Ejemplo",id:"ejemplo-10",level:4},{value:".validateTransaction()",id:"validatetransaction",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-14",level:4},{value:"Ejemplo",id:"ejemplo-11",level:4}],c={toc:p};function m(e){var{components:t}=e,a=l(e,["components"]);return(0,n.kt)("wrapper",r({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Un ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/es/19/ORDA/dsmapping#datastore"}),"Datastore")," es el objeto de interfaz suministrado por ORDA para referenciar y acceder a una base de datos. Los objetos ",(0,n.kt)("inlineCode",{parentName:"p"},"Datastore")," son devueltos por los siguientes comandos:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",r({parentName:"li"},{href:"#ds"}),"ds"),": un acceso directo al almac\xe9n de datos principal"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",r({parentName:"li"},{href:"#open-datastore"}),"Open datastore"),": para abrir todo almac\xe9n de datos remoto")),(0,n.kt)("h3",r({},{id:"resumen"}),"Resumen"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}))))),(0,n.kt)("p",null,"| ",(0,n.kt)("a",r({parentName:"p"},{href:"#canceltransaction"}),(0,n.kt)("strong",{parentName:"a"},".cancelTransaction()")),"\xa0","\xa0","\xa0","\xa0","cancels the transaction|\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#dataclassname"}),(0,n.kt)("strong",{parentName:"a"},(0,n.kt)("em",{parentName:"strong"},".dataclassName"))," : 4D.DataClass"),"\xa0","\xa0","\xa0","\xa0","contains a description of the dataclass |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#encryptionstatus"}),(0,n.kt)("strong",{parentName:"a"},".encryptionStatus()"),": Object"),"\xa0","\xa0","\xa0","\xa0","returns an object providing the encryption status for the current data file |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#getinfo"}),(0,n.kt)("strong",{parentName:"a"},".getInfo()"),": Object"),"\xa0","\xa0","\xa0","\xa0","The ",(0,n.kt)("inlineCode",{parentName:"p"},".getInfo()")," function |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#getrequestlog"}),(0,n.kt)("strong",{parentName:"a"},".getRequestLog()")," : Collection"),"\xa0","\xa0","\xa0","\xa0","returns the ORDA requests logged in memory on the client side |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#makeselectionsalterable"}),(0,n.kt)("strong",{parentName:"a"},".makeSelectionsAlterable()")),"\xa0","\xa0","\xa0","\xa0","sets all entity selections as alterable by default in the current application datastores |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#providedatakey"}),(0,n.kt)("strong",{parentName:"a"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"a"},"curPassPhrase")," : Text ) : Object ",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"a"},"curDataKey")," : Object ) : Object "),"\xa0","\xa0","\xa0","\xa0","allows providing a data encryption key for the current data file of the datastore and detects if the key matches the encrypted data |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#setadminprotection"}),(0,n.kt)("strong",{parentName:"a"},".setAdminProtection"),"( ",(0,n.kt)("em",{parentName:"a"},"status")," : Boolean )"),"\xa0","\xa0","\xa0","\xa0","allows disabling any data access on the ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/es/19/Admin/webAdmin#http-port"}),"web admin port"),", including for the ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/es/19/Admin/dataExplorer"}),"Data Explorer")," in ",(0,n.kt)("inlineCode",{parentName:"p"},"WebAdmin")," sessions |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#startrequestlog"}),(0,n.kt)("strong",{parentName:"a"},".startRequestLog"),"()",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"a"},"file")," : 4D.File )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"a"},"reqNum")," : Integer )"),"\xa0","\xa0","\xa0","\xa0","starts the logging of ORDA requests on the client side |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("strong",{parentName:"a"},".startTransaction()")),"\xa0","\xa0","\xa0","\xa0","starts a transaction in the current process on the database matching the datastore to which it applies |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#stoprequestlog"}),(0,n.kt)("strong",{parentName:"a"},".stopRequestLog()"),"  "),"\xa0","\xa0","\xa0","\xa0","stops any logging of ORDA requests on the client side |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#validatetransaction"}),(0,n.kt)("strong",{parentName:"a"},".validateTransaction()"),"  "),"\xa0","\xa0","\xa0","\xa0","accepts the transaction  |"),(0,n.kt)("h2",r({},{id:"ds"}),"ds"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Soporte del par\xe1metro localID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"ds")," { ( ",(0,n.kt)("em",{parentName:"p"},"localID")," : Text ) } : cs.DataStore\n| Par\xe1metros | Type         |    | Descripci\xf3n                                               |\n| ---------- | ------------ | -- | --------------------------------------------------------- |\n| localID    | Text         | -> | ID local del almac\xe9n de datos remoto a devolver           |\n| Result     | cs.DataStore | <- | Referencia al almac\xe9n de datos|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"ds")," command returns a reference to the datastore matching the current 4D database or the database designated by ",(0,n.kt)("em",{parentName:"p"},"localID"),"."),(0,n.kt)("p",null,"Si se omite el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"localID"),' (o se pasa una cadena vac\xeda ""), el comando devuelve una referencia al almac\xe9n de datos que coincide con la base de datos local de 4D (o la base de datos de 4D Server en caso de abrir una base de datos remota en 4D Server). El almac\xe9n de datos se abre autom\xe1ticamente y est\xe1 disponible directamente a trav\xe9s de ',(0,n.kt)("inlineCode",{parentName:"p"},"ds"),"."),(0,n.kt)("p",null,"Tambi\xe9n puede obtener una referencia en un datastore remoto abierto pasando su id local en el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"localID"),". El almac\xe9n de datos debe haber sido abierto previamente con el comando ",(0,n.kt)("a",r({parentName:"p"},{href:"#open-datastore"}),(0,n.kt)("inlineCode",{parentName:"a"},"Open datastore"))," por la base de datos actual (local o componente). La identificaci\xf3n local se define cuando se utiliza este comando."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"El alcance del id local es la base de datos en la que se ha abierto el almac\xe9n de datos.")),(0,n.kt)("p",null,"Si no se encuentra ning\xfan almac\xe9n de datos ",(0,n.kt)("em",{parentName:"p"},"localID"),", el comando devuelve ",(0,n.kt)("strong",{parentName:"p"},"Null"),"."),(0,n.kt)("p",null,"El uso de ",(0,n.kt)("inlineCode",{parentName:"p"},"ds")," requiere que la base de datos de destino sea compatible con ORDA, como se especifica en la secci\xf3n ",(0,n.kt)("strong",{parentName:"p"},"Requisitos previos de ORDA"),". Se aplican las siguientes reglas:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Un datastore s\xf3lo hace referencia a las tablas con una sola llave primaria. A datastore only references tables with a single primary key."),(0,n.kt)("li",{parentName:"ul"},"Los atributos de tipo BLOB no se gestionan en el almac\xe9n de datos.")),(0,n.kt)("h4",r({},{id:"ejemplo-1"}),"Ejemplo 1"),(0,n.kt)("p",null,"Utilizando el almac\xe9n de datos principal de la base 4D:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $result:=ds.Employee.query("firstName = :1";"S@")\n')),(0,n.kt)("h4",r({},{id:"ejemplo-2"}),"Ejemplo 2"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo; $firstFrench; $firstForeign : Object\n\n var $frenchStudents; $foreignStudents : cs.DataStore\n\n $connectTo:=New object("type";"4D Server";"hostname";"192.168.18.11:8044")\n $frenchStudents:=Open datastore($connectTo;"french")\n\n $connectTo.hostname:="192.168.18.11:8050"\n $foreignStudents:=Open datastore($connectTo;"foreign")\n  //...\n  //...\n $firstFrench:=getFirst("french";"Students")\n $firstForeign:=getFirst("foreign";"Students")\n')),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"  //getFirst method\n  //getFirst(localID;dataclass) -> entity\n #DECLARE( $localId : Text; $dataClassName : Text ) -> $entity : 4D.Entity\n\n $0:=ds($localId)[$dataClassName].all().first()\n")),(0,n.kt)("h2",r({},{id:"open-datastore"}),"Open datastore"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Open datastore"),"( ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," : Object ; ",(0,n.kt)("em",{parentName:"p"},"localID")," : Text ) : cs.DataStore\n| Par\xe1metros     | Type         |    | Descripci\xf3n                                                                      |\n| -------------- | ------------ | -- | -------------------------------------------------------------------------------- |\n| connectionInfo | Object       | -> | Propiedades de conexi\xf3n utilizadas para alcanzar el almac\xe9n de datos remoto      |\n| localID        | Text         | -> | Id para asignar al almac\xe9n de datos abierto en la aplicaci\xf3n local (obligatorio) |\n| Result         | cs.DataStore | <- | Objeto del almac\xe9n de datos|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-1"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"Open datastore")," command connects the application to the 4D database identified by the ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," parameter and returns a matching ",(0,n.kt)("inlineCode",{parentName:"p"},"cs.DataStore")," object associated with the ",(0,n.kt)("em",{parentName:"p"},"localID")," local alias."),(0,n.kt)("p",null,"La base de datos ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," 4D debe estar disponible como almac\xe9n de datos remoto, es decir:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"su servidor web debe ser lanzado con http y/o https activado,"),(0,n.kt)("li",{parentName:"ul"},"su opci\xf3n ",(0,n.kt)("a",r({parentName:"li"},{href:"/docs/es/19/REST/configuration#starting-the-rest-server"}),(0,n.kt)("strong",{parentName:"a"},"Exponer como servidor REST"))," debe estar marcada,"),(0,n.kt)("li",{parentName:"ul"},"se dispone de al menos una licencia cliente.")),(0,n.kt)("p",null,"Si no se encuentra ninguna base de datos coincidente, ",(0,n.kt)("inlineCode",{parentName:"p"},"Open datastore")," devuelve ",(0,n.kt)("strong",{parentName:"p"},"Null"),"."),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"localID")," es un alias local para la sesi\xf3n abierta en el almac\xe9n de datos remoto. Si ",(0,n.kt)("em",{parentName:"p"},"localID")," ya existe en la aplicaci\xf3n, se utiliza. En caso contrario, se crea una nueva sesi\xf3n ",(0,n.kt)("em",{parentName:"p"},"localID")," cuando se utiliza el objeto datastore."),(0,n.kt)("p",null,"Una vez abierta la sesi\xf3n, las siguientes sentencias son equivalentes y devuelven una referencia sobre el mismo objeto datastore:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $myds:=Open datastore(connectionInfo;"myLocalId")\n $myds2:=ds("myLocalId")\n  //$myds y $myds2 son equivalentes\n')),(0,n.kt)("p",null,"Pase en ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," un objeto que describa el almac\xe9n de datos remoto al que desea conectarse. Puede contener las siguientes propiedades (todas las propiedades son opcionales excepto ",(0,n.kt)("em",{parentName:"p"},"hostname"),"):"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propiedad"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"hostname"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Nombre o direcci\xf3n IP de la base de datos remota + ":" + n\xfamero de puerto (el n\xfamero de puerto es obligatorio)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nombre de usuario")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"contrase\xf1a"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Contrase\xf1a del usuario")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"idleTimeout"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Longint"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Tiempo de espera de la sesi\xf3n de inactividad (en minutos), despu\xe9s del cual la sesi\xf3n es cerrada autom\xe1ticamente por 4D. Si se omite, el valor por defecto es 60 (1h). El valor no puede ser < 60 (si se pasa un valor inferior, el tiempo de espera se establece en 60). Para m\xe1s informaci\xf3n, consulte ",(0,n.kt)("strong",{parentName:"td"},"Cierre de sesiones"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"tls"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Utilice una conexi\xf3n segura(*). Si se omite, es false por defecto. Se recomienda utilizar una conexi\xf3n segura siempre que sea posible.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"type"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Debe ser "4D Server"')))),(0,n.kt)("p",null,"(*) Si tls es true, se utiliza el protocolo HTTPS si:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"HTTPS est\xe1 activado en el almac\xe9n de datos remoto"),(0,n.kt)("li",{parentName:"ul"},"el n\xfamero de puerto especificado coincide con el puerto HTTPS configurado en los ajustes de la base de datos"),(0,n.kt)("li",{parentName:"ul"},'un certificado v\xe1lido y una llave privada de encriptaci\xf3n est\xe1n instalados en la base de datos. En caso contrario, se produce el error "1610 - Una solicitud remota al host xxx ha fallado"')),(0,n.kt)("h4",r({},{id:"ejemplo-1-1"}),"Ejemplo 1"),(0,n.kt)("p",null,"Conexi\xf3n a un almac\xe9n de datos remoto sin usuario/contrase\xf1a:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo : Object\n var $remoteDS : cs.DataStore\n $connectTo:=New object("type";"4D Server";"hostname";"192.168.18.11:8044")\n $remoteDS:=Open datastore($connectTo;"students")\n ALERT("This remote datastore contains "+String($remoteDS.Students.all().length)+" students")\n')),(0,n.kt)("h4",r({},{id:"ejemplo-2-1"}),"Ejemplo 2"),(0,n.kt)("p",null,"Conexi\xf3n a un almac\xe9n de datos remoto con usuario/contrase\xf1a/ timeout / tls:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo : Object\n var $remoteDS : cs.DataStore\n $connectTo:=New object("type";"4D Server";"hostname";\\"192.168.18.11:4443";\\  \n  "user";"marie";"password";$pwd;"idleTimeout";70;"tls";True)\n $remoteDS:=Open datastore($connectTo;"students")\n ALERT("This remote datastore contains "+String($remoteDS.Students.all().length)+" students")\n')),(0,n.kt)("h4",r({},{id:"ejemplo-3"}),"Ejemplo 3"),(0,n.kt)("p",null,"Trabajar con varios almacenes de datos remotos:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo : Object\n var $frenchStudents; $foreignStudents : cs.DataStore\n $connectTo:=New object("hostname";"192.168.18.11:8044")\n $frenchStudents:=Open datastore($connectTo;"french")\n $connectTo.hostname:="192.168.18.11:8050"\n $foreignStudents:=Open datastore($connectTo;"foreign")\n ALERT("They are "+String($frenchStudents.Students.all().length)+" French students")\n ALERT("They are "+String($foreignStudents.Students.all().length)+" foreign students")\n')),(0,n.kt)("h4",r({},{id:"gesti\xf3n-de-errores"}),"Gesti\xf3n de errores"),(0,n.kt)("p",null,"En caso de error, el comando devuelve ",(0,n.kt)("strong",{parentName:"p"},"Null"),'. Si no se puede acceder al almac\xe9n de datos remoto (direcci\xf3n incorrecta, servidor web no iniciado, http y https no habilitados...), se produce el error 1610 "Ha fallado una petici\xf3n remota al host XXX". Puede interceptar este error con un m\xe9todo instalado por ',(0,n.kt)("inlineCode",{parentName:"p"},"ON ERR CALL"),"."),(0,n.kt)("h2",r({},{id:"dataclassname"}),(0,n.kt)("em",{parentName:"h2"},".dataclassName")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},".dataclassName"))," : 4D.DataClass"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-2"}),"Descripci\xf3n"),(0,n.kt)("p",null,"Cada clase de datos de un almac\xe9n de datos est\xe1 disponible como una propiedad del objeto ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/es/19/ORDA/dsmapping#datastore"}),"DataStore"),"data. The returned object contains a description of the dataclass."),(0,n.kt)("h4",r({},{id:"ejemplo"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $emp : cs.Employee\n var $sel : cs.EmployeeSelection\n $emp:=ds.Employee //$emp contiene la dataclass Employee \n $sel:=$emp.all() //obtiene una selecci\xf3n de entidades de todos los empleados\n\n  //tambi\xe9n puede escribir directamente:\n $sel:=ds.Employee.all()\n")),(0,n.kt)("h2",r({},{id:"canceltransaction"}),".cancelTransaction()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".cancelTransaction()"),"\n| Par\xe1metros | Type |  | Descripci\xf3n                                                |\n| ---------- | ---- |::| ---------------------------------------------------------- |\n|            |      |  | Does not require any parameters|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-3"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".cancelTransaction()")," function cancels the transaction opened by the ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()"))," function at the corresponding level in the current process for the specified datastore."),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".cancelTransaction()")," cancela cualquier cambio realizado en los datos durante la transacci\xf3n."),(0,n.kt)("p",null,"Puede anidar varias transacciones (subtransacciones). Si se cancela la transacci\xf3n principal, tambi\xe9n se cancelan todas sus subtransacciones, aunque se hayan validado individualmente mediante la funci\xf3n ",(0,n.kt)("a",r({parentName:"p"},{href:"#validatetransactions"}),(0,n.kt)("inlineCode",{parentName:"a"},".validateTransaction()")),"."),(0,n.kt)("h4",r({},{id:"ejemplo-4"}),"Ejemplo"),(0,n.kt)("p",null,"Ver el ejemplo de la funci\xf3n ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()")),"."),(0,n.kt)("h2",r({},{id:"encryptionstatus"}),".encryptionStatus()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".encryptionStatus()"),": Object\n| Par\xe1metros | Type   |    | Descripci\xf3n                                                                                         |\n| ---------- | ------ |:--:| --------------------------------------------------------------------------------------------------- |\n| Result     | Object | <- | Informaci\xf3n sobre el cifrado del almac\xe9n de datos actual y de cada tabla|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-4"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".encryptionStatus()")," function returns an object providing the encryption status for the current data file (i.e., the data file of the ",(0,n.kt)("inlineCode",{parentName:"p"},"ds")," datastore). Tambi\xe9n se proporciona el estado de cada tabla."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Utilice el comando ",(0,n.kt)("inlineCode",{parentName:"p"},"Data file encryption status")," para determinar el estado de encriptaci\xf3n de cualquier otro archivo de datos.")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Valor devuelto")),(0,n.kt)("p",null,"El objeto devuelto contiene las siguientes propiedades:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propiedad"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"isEncrypted"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True si el archivo de datos est\xe1 encriptado")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"keyProvided"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True si se proporciona la llave de encriptaci\xf3n que coincide con el archivo de datos encriptados(*).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"tablas"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto que contiene tantas propiedades como tablas encriptadas o codificadas.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},"tableName")),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Tabla encriptada o cifrada")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nombre de la tabla")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"num"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xfamero de tabla")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"isEncryptable"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Verdadero si la tabla est\xe1 declarada como encriptada en el archivo de estructura")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"isEncrypted"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True si los registros de la tabla est\xe1n encriptados en el archivo de datos")))),(0,n.kt)("p",null,"(*) Se puede suministrar la llave de encriptaci\xf3n:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"con el comando ",(0,n.kt)("inlineCode",{parentName:"li"},".provideDataKey()"),","),(0,n.kt)("li",{parentName:"ul"},"en la ra\xedz de un dispositivo conectado antes de abrir el almac\xe9n de datos,"),(0,n.kt)("li",{parentName:"ul"},"con el comando ",(0,n.kt)("inlineCode",{parentName:"li"},"Discover data key"),".")),(0,n.kt)("h4",r({},{id:"ejemplo-5"}),"Ejemplo"),(0,n.kt)("p",null,"Quiere saber el n\xfamero de tablas encriptadas en el archivo de datos actual:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n\n $status:=dataStore.encryptionStatus()\n\n If($status.isEncrypted) //the database is encrypted\n    C_LONGINT($vcount)\n    C_TEXT($tabName)\n    For each($tabName;$status.tables)\n       If($status.tables[$tabName].isEncrypted)\n          $vcount:=$vcount+1\n       End if\n    End for each\n    ALERT(String($vcount)+" encrypted table(s) in this datastore.")\n Else\n    ALERT("This database is not encrypted.")\n End if\n Else\n    ALERT("This database is not encrypted.")\n End if\n')),(0,n.kt)("h2",r({},{id:"getinfo"}),".getInfo()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getInfo()"),": Object\n| Par\xe1metros | Type   |    | Descripci\xf3n                                     |\n| ---------- | ------ |:--:| ----------------------------------------------- |\n| Result     | Object | <- | Datastore properties|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-5"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getInfo()")," function The ",(0,n.kt)("inlineCode",{parentName:"p"},".getInfo()")," function. Esta funci\xf3n es \xfatil para configurar el c\xf3digo gen\xe9rico."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Objeto devuelto")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propiedad"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"type"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"string"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("li",null,'"4D": almac\xe9n de datos principal, disponible a trav\xe9s de ds '),(0,n.kt)("li",null,'"4D Server": almac\xe9n de datos remoto, abierto con Open datastore'))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"networked"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("li",null,"True: el almac\xe9n de datos se alcanza a trav\xe9s de una conexi\xf3n de red."),(0,n.kt)("li",null,"False: no se llega al almac\xe9n de datos a trav\xe9s de una conexi\xf3n de red (base de datos local)"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"localID"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"ID del almac\xe9n de datos en la m\xe1quina. Corresponde a la cadena localId dada con el comando ",(0,n.kt)("inlineCode",{parentName:"td"},"Open datastore"),'. Cadena vac\xeda ("") para el almac\xe9n de datos principal.')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"connection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto que describe la conexi\xf3n del almac\xe9n de datos remoto (no se devuelve para el almac\xe9n de datos principal). Propiedades disponibles:",(0,n.kt)("table",null,(0,n.kt)("tr",null,(0,n.kt)("th",null,"Propiedad"),(0,n.kt)("th",null,"Type"),(0,n.kt)("th",null,"Descripci\xf3n")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"hostname"),(0,n.kt)("td",null,"text"),(0,n.kt)("td",null,'Direcci\xf3n IP o nombre del datastore remoto + ":" + n\xfamero de puerto')),(0,n.kt)("tr",null,(0,n.kt)("td",null,"tls"),(0,n.kt)("td",null,"boolean"),(0,n.kt)("td",null,"True si se utiliza una conexi\xf3n segura con el almac\xe9n de datos remoto")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"idleTimeout"),(0,n.kt)("td",null,"number"),(0,n.kt)("td",null,"Tiempo de inactividad de la sesi\xf3n (en minutos)")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"user"),(0,n.kt)("td",null,"text"),(0,n.kt)("td",null,"Usuario autentificado en el almac\xe9n de datos remoto"))))))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Si la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"li"},".getInfo()")," se ejecuta en un 4D Server o 4D monopuesto, ",(0,n.kt)("inlineCode",{parentName:"li"},"networked")," es False."),(0,n.kt)("li",{parentName:"ul"},"Si la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"li"},".getInfo()")," se ejecuta en un 4D remoto, ",(0,n.kt)("inlineCode",{parentName:"li"},"networked")," es True")),(0,n.kt)("h4",r({},{id:"ejemplo-1-2"}),"Ejemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $info : Object\n\n $info:=ds.getInfo() //Ejecutado en 4D Server o 4D\n  //{"type":"4D","networked":false,"localID":""}\n\n $info:=ds.getInfo() // Ejecutado en 4D remoto\n  //{"type":"4D","networked":true,"localID":""}\n')),(0,n.kt)("h4",r({},{id:"ejemplo-2-2"}),"Ejemplo 2"),(0,n.kt)("p",null,"En un almac\xe9n de datos remoto:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'  var $remoteDS : cs.DataStore\n  var $info; $connectTo : Object\n\n $connectTo:=New object("hostname";"111.222.33.44:8044";"user";"marie";"password";"aaaa")\n $remoteDS:=Open datastore($connectTo;"students")\n $info:=$remoteDS.getInfo()\n\n  //{"type":"4D Server",\n  //"localID":"students",\n  //"networked":true,\n  //"connection":{hostname:"111.222.33.44:8044","tls":false,"idleTimeout":2880,"user":"marie"}}\n')),(0,n.kt)("h2",r({},{id:"getrequestlog"}),".getRequestLog()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getRequestLog()")," : Collection\n| Par\xe1metros | Type       |    | Descripci\xf3n                                                                             |\n| ---------- | ---------- |:--:| --------------------------------------------------------------------------------------- |\n| Result     | Collection | <- | Collection of objects, where each object describes a request|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-6"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getRequestLog()")," function returns the ORDA requests logged in memory on the client side. ."),(0,n.kt)("p",null,"Esta funci\xf3n debe ser llamada en un 4D remoto, de lo contrario devuelve una colecci\xf3n vac\xeda. Est\xe1 dise\xf1ado para fines de depuraci\xf3n en configuraciones cliente/servidor."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Valor devuelto")),(0,n.kt)("p",null,"Colecci\xf3n de objetos de petici\xf3n apilados. La solicitud m\xe1s reciente tiene el \xedndice 0."),(0,n.kt)("p",null,"Para una descripci\xf3n del formato del registro de peticiones de ORDA, consulte la secci\xf3n ",(0,n.kt)("a",r({parentName:"p"},{href:"https://doc.4d.com/4Dv18/4D/18/Description-of-log-files.300-4575486.en.html#4385373"}),(0,n.kt)("strong",{parentName:"a"},"Preguntas cliente ORDA")),"."),(0,n.kt)("h4",r({},{id:"ejemplo-6"}),"Ejemplo"),(0,n.kt)("p",null,"Ver el ejemplo 2 de ",(0,n.kt)("a",r({parentName:"p"},{href:"#startrequestlog"}),(0,n.kt)("inlineCode",{parentName:"a"},".startRequestLog()")),"."),(0,n.kt)("h2",r({},{id:"isadminprotected"}),".isAdminProtected()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v18 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".isAdminProtected()")," : Boolean\n| Par\xe1metros | Type    |    | Descripci\xf3n                                                                                                                |\n| ---------- | ------- |:--:| -------------------------------------------------------------------------------------------------------------------------- |\n| Result     | Boolean | <- | True si el acceso al Explorador de Datos est\xe1 desactivado, False si est\xe1 activado (por defecto)|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-7"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".isAdminProtected()")," function returns ",(0,n.kt)("inlineCode",{parentName:"p"},"True")," if ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/es/19/Admin/dataExplorer"}),"Data Explorer")," access has been disabled for the working session."),(0,n.kt)("p",null,"Por defecto, el acceso al Explorador de Datos se concede para las sesiones ",(0,n.kt)("inlineCode",{parentName:"p"},"webAdmin"),", pero se puede desactivar para evitar cualquier acceso a los datos por parte de los administradores (ver la funci\xf3n ",(0,n.kt)("a",r({parentName:"p"},{href:"#setadminprotection"}),(0,n.kt)("inlineCode",{parentName:"a"},".setAdminProtection()")),")."),(0,n.kt)("h4",r({},{id:"ver-tambi\xe9n"}),"Ver tambi\xe9n"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#setadminprotection"}),(0,n.kt)("inlineCode",{parentName:"a"},".setAdminProtection()"))),(0,n.kt)("h2",r({},{id:"makeselectionsalterable"}),".makeSelectionsAlterable()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v18 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".makeSelectionsAlterable()"),"\n| Par\xe1metros | Type |  | Descripci\xf3n                                                |\n| ---------- | ---- |::| ---------------------------------------------------------- |\n|            |      |  | Does not require any parameters|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-8"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".makeSelectionsAlterable()")," function sets all entity selections as alterable by default in the current application datastores (including ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/es/19/ORDA/datastores"}),"remote datastores"),"). Est\xe1 pensado para ser utilizado una vez, por ejemplo en el m\xe9todo base ",(0,n.kt)("inlineCode",{parentName:"p"},"On Startup"),"."),(0,n.kt)("p",null,'Cuando no se llama a esta funci\xf3n, las nuevas selecciones de entidades pueden ser compartibles, dependiendo de la naturaleza de su "padre", o de ',(0,n.kt)("a",r({parentName:"p"},{href:"/docs/es/19/ORDA/entities#shareable-or-non-shareable-entity-selections"}),"c\xf3mo se crean"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Esta funci\xf3n no modifica las selecciones de entidades creadas por ",(0,n.kt)("a",r({parentName:"p"},{href:"#copy"}),(0,n.kt)("inlineCode",{parentName:"a"},".copy()"))," o ",(0,n.kt)("inlineCode",{parentName:"p"},"OB Copy")," cuando se utiliza la opci\xf3n expl\xedcita ",(0,n.kt)("inlineCode",{parentName:"p"},"ck shared"),".")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Compatibilidad"),": esta funci\xf3n s\xf3lo debe utilizarse en proyectos convertidos desde versiones de 4D anteriores a 4D v18 R5 y que contengan llamadas ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/es/19/API/EntitySelectionClass#add"}),".add()"),". En este contexto, el uso de ",(0,n.kt)("inlineCode",{parentName:"p"},".makeSelectionsAlterable()")," puede ahorrar tiempo al restaurar instant\xe1neamente el comportamiento anterior de 4D en los proyectos existentes. Por otro lado, utilizar este m\xe9todo en proyectos nuevos creados en 4D v18 R5 y superiores ",(0,n.kt)("strong",{parentName:"p"},"no es recomendable"),", ya que impide compartir las selecciones de entidades, lo que ofrece mayor rendimiento y escalabilidad.")),(0,n.kt)("h2",r({},{id:"providedatakey"}),".provideDataKey()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"p"},"curPassPhrase")," : Text ) : Object ",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"p"},"curDataKey")," : Object ) : Object\n| Par\xe1metros    | Type   |    | Descripci\xf3n                                                                         |\n| ------------- | ------ | -- | ----------------------------------------------------------------------------------- |\n| curPassPhrase | Text   | -> | Frase de cifrado actual                                                             |\n| curDataKey    | Object | -> | Llave de encriptaci\xf3n de datos actual                                               |\n| Result        | Object | <- | Resultado de la coincidencia de la llave de encriptaci\xf3n|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-9"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".provideDataKey()")," function allows providing a data encryption key for the current data file of the datastore and detects if the key matches the encrypted data. Esta funci\xf3n se puede utilizar al abrir una base encriptada, o al ejecutar cualquier operaci\xf3n de encriptaci\xf3n que requiera la llave de encriptaci\xf3n, como por ejemplo volver a encriptar el archivo de datos."),(0,n.kt)("blockquote",null,(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"li"},".provideDataKey()")," debe ser llamada en una base de datos encriptada. Si se llama en una base no cifrada, se devuelve el error 2003 (la llave de cifrado no coincide con los datos.). Utilice el comando ",(0,n.kt)("inlineCode",{parentName:"li"},"Estado de cifrado del archivo de datos")," para determinar si la base de datos est\xe1 cifrada."),(0,n.kt)("li",{parentName:"ul"},"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"li"},".provideDataKey()")," no puede ser llamada desde un 4D remoto o un datastore remoto encriptado."))),(0,n.kt)("p",null,"Si utiliza el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"curPassPhrase"),", pase la cadena utilizada para generar la llave de cifrado de datos. Cuando se utiliza este par\xe1metro, se genera una llave de encriptaci\xf3n."),(0,n.kt)("p",null,"Si utiliza el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"curDataKey"),", pase un objeto (con la propiedad ",(0,n.kt)("em",{parentName:"p"},"encodedKey"),") que contenga la llave de cifrado de los datos. Esta llave puede haber sido generada con el comando ",(0,n.kt)("inlineCode",{parentName:"p"},"New data key"),"."),(0,n.kt)("p",null,"Si se aporta una llave de cifrado de datos v\xe1lida, se a\xf1ade a la ",(0,n.kt)("em",{parentName:"p"},"keyChain")," de la memoria y se activa el modo de cifrado:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"todas las modificaciones de datos en las tablas encriptadas se cifran en el disco (.4DD, .journal. 4Dindx)"),(0,n.kt)("li",{parentName:"ul"},"todos los datos cargados desde tablas encriptadas se descifran en memoria")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Result")),(0,n.kt)("p",null,"El resultado de la orden se describe en el objeto devuelto:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propiedad"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True si la llave de encriptaci\xf3n proporcionada coincide con los datos encriptados, False en caso contrario")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Las siguientes propiedades se devuelven s\xf3lo si success es ",(0,n.kt)("em",{parentName:"td"},"FALSE"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de error (4 si la llave de encriptaci\xf3n suministrada es err\xf3nea)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"statusText"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Mensaje de error")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Pila de errores. El primer error tiene el \xedndice m\xe1s alto")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"["," ].componentSignature"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nombre del componente interno")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"["," ].errCode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xfamero de error")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"["," ].message"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Mensaje de error")))),(0,n.kt)("p",null,"Si no se da ",(0,n.kt)("em",{parentName:"p"},"curPassphrase")," o ",(0,n.kt)("em",{parentName:"p"},"curDataKey"),", ",(0,n.kt)("inlineCode",{parentName:"p"},".provideDataKey()")," devuelve ",(0,n.kt)("strong",{parentName:"p"},"null")," (no se genera ning\xfan error)."),(0,n.kt)("h4",r({},{id:"ejemplo-7"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $keyStatus : Object\n var $passphrase : Text\n\n $passphrase:=Request("Enter the passphrase")\n If(OK=1)\n    $keyStatus:=ds.provideDataKey($passphrase)\n    If($keyStatus.success)\n       ALERT("You have provided a valid encryption key")\n    Else\n       ALERT("You have provided an invalid encryption key, you will not be able to work with encrypted data")\n    End if\n End if\n')),(0,n.kt)("h2",r({},{id:"setadminprotection"}),".setAdminProtection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v18 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".setAdminProtection"),"( ",(0,n.kt)("em",{parentName:"p"},"status")," : Boolean )\n| Par\xe1metros | Type    |    | Descripci\xf3n                                                                                                                                           |\n| ---------- | ------- | -- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |\n| status     | Boolean | -> | True para desactivar el acceso Data Explorer a los datos del puerto ",(0,n.kt)("inlineCode",{parentName:"p"},"webAdmin"),", False (por defecto) para otorgar el acceso|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-10"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".setAdminProtection()")," function allows disabling any data access on the ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/es/19/Admin/webAdmin#http-port"}),"web admin port"),", including for the ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/es/19/Admin/dataExplorer"}),"Data Explorer")," in ",(0,n.kt)("inlineCode",{parentName:"p"},"WebAdmin")," sessions."),(0,n.kt)("p",null,"Por defecto, cuando no se llama a la funci\xf3n, el acceso a los datos se concede siempre en el puerto de administraci\xf3n web para una sesi\xf3n con privilegio ",(0,n.kt)("inlineCode",{parentName:"p"},"WebAdmin")," utilizando el Explorador de Datos. En algunas configuraciones, por ejemplo, cuando el servidor de aplicaciones est\xe1 alojado en una m\xe1quina de terceros, es posible que no desee que el administrador pueda ver sus datos, aunque puede editar la configuraci\xf3n del servidor, incluyendo la configuraci\xf3n de la ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/es/19/Admin/webAdmin#access-key"}),"access key"),"."),(0,n.kt)("p",null,"En este caso, puede llamar a esta funci\xf3n para deshabilitar el acceso a los datos del Explorador de Datos en el puerto de administraci\xf3n web de la m\xe1quina, incluso si la sesi\xf3n de usuario tiene el privilegio ",(0,n.kt)("inlineCode",{parentName:"p"},"WebAdmin"),". Cuando se ejecuta esta funci\xf3n, el archivo de datos se protege inmediatamente y el estado se almacena en el disco: el archivo de datos estar\xe1 protegido incluso si se reinicia la aplicaci\xf3n."),(0,n.kt)("h4",r({},{id:"ejemplo-8"}),"Ejemplo"),(0,n.kt)("p",null,"Se crea un m\xe9todo proyecto ",(0,n.kt)("em",{parentName:"p"},"protectDataFile")," para llamar antes de los despliegues, por ejemplo:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," ds.setAdminProtection(True) //Desactiva el acceso a los datos del Explorador de datos\n")),(0,n.kt)("h4",r({},{id:"ver-tambi\xe9n-1"}),"Ver tambi\xe9n"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#isadminprotected"}),(0,n.kt)("inlineCode",{parentName:"a"},".isAdminProtected()"))),(0,n.kt)("h2",r({},{id:"startrequestlog"}),".startRequestLog()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".startRequestLog"),"()",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"p"},"file")," : 4D.File )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"p"},"reqNum")," : Integer )\n| Par\xe1metros | Type    |    | Descripci\xf3n                                                     |\n| ---------- | ------- | -- | --------------------------------------------------------------- |\n| file       | 4D.File | -> | Objeto File                                                     |\n| reqNum     | Integer | -> | Number of requests to keep in memory|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-11"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog()")," function starts the logging of ORDA requests on the client side."),(0,n.kt)("p",null,"Esta funci\xf3n debe ser llamada en un 4D remoto, de lo contrario no hace nada. Est\xe1 dise\xf1ado para fines de depuraci\xf3n en configuraciones cliente/servidor."),(0,n.kt)("p",null,"El registro de peticiones ORDA puede ser enviado a un archivo o a la memoria, dependiendo del tipo de par\xe1metro:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Si se pasa un objeto ",(0,n.kt)("em",{parentName:"p"},"file")," creado con el comando ",(0,n.kt)("inlineCode",{parentName:"p"},"File"),", los datos de registro se escriben en este archivo como una colecci\xf3n de objetos (formato JSON). Each object represents a request.",(0,n.kt)("br",null),"If the file does not already exist, it is created. En caso contrario, si el archivo ya existe, los nuevos datos de registro se a\xf1aden a \xe9l. Si se llama a ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog( )")," con un archivo mientras se inici\xf3 previamente un registro en memoria, el registro en memoria se detiene y se vac\xeda."),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"Debe a\xf1adirse manualmente un car\xe1cter \\N al final del archivo para realizar una validaci\xf3n JSON"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Si se pasa un entero ",(0,n.kt)("em",{parentName:"p"},"reqNum"),", se vac\xeda el registro en memoria (si lo hay) y se inicializa un nuevo registro. It will keep ",(0,n.kt)("em",{parentName:"p"},"reqNum")," requests in memory until the number is reached, in which case the oldest entries are emptied (FIFO stack).",(0,n.kt)("br",null),"If ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog()")," is called with a ",(0,n.kt)("em",{parentName:"p"},"reqNum")," while a logging was previously started in a file, the file logging is stopped.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Si no ha pasado ning\xfan par\xe1metro, el registro se inicia en la memoria. Si se llam\xf3 previamente a ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog()")," con un ",(0,n.kt)("em",{parentName:"p"},"reqNum")," (antes de un ",(0,n.kt)("inlineCode",{parentName:"p"},".stopRequestLog()"),"), los datos del registro se apilan en memoria hasta la pr\xf3xima vez que se vac\xede el registro o se llame a ",(0,n.kt)("inlineCode",{parentName:"p"},".stopRequestLog()"),"."))),(0,n.kt)("p",null,"Para una descripci\xf3n del formato del registro de peticiones de ORDA, consulte la secci\xf3n ",(0,n.kt)("a",r({parentName:"p"},{href:"https://doc.4d.com/4Dv18/4D/18/Description-of-log-files.300-4575486.en.html#4385373"}),(0,n.kt)("strong",{parentName:"a"},"Preguntas cliente ORDA")),"."),(0,n.kt)("h4",r({},{id:"ejemplo-1-3"}),"Ejemplo 1"),(0,n.kt)("p",null,"Desea registrar las solicitudes de los clientes ORDA en un archivo y utilizar el n\xfamero de secuencia del registro:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $file : 4D.File\n var $e : cs.PersonsEntity\n\n $file:=File("/LOGS/ORDARequests.txt") //logs folder\n\n SET DATABASE PARAMETER(Client Log Recording;1) //to trigger the global log sequence number\n ds.startRequestLog($file)\n $e:=ds.Persons.get(30001) //send a request\n ds.stopRequestLog()\n SET DATABASE PARAMETER(Client Log Recording;0)\n')),(0,n.kt)("h4",r({},{id:"ejemplo-2-3"}),"Ejemplo 2"),(0,n.kt)("p",null,"Quiere registrar las peticiones de los clientes ORDA en la memoria:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $es : cs.PersonsSelection\n var $log : Collection\n\n ds.startRequestLog(3) //keep 3 requests in memory\n\n $es:=ds.Persons.query("name=:1";"Marie")\n $es:=ds.Persons.query("name IN :1";New collection("Marie"))\n $es:=ds.Persons.query("name=:1";"So@")\n\n $log:=ds.getRequestLog()\n ALERT("The longest request lasted: "+String($log.max("duration"))+" ms")\n')),(0,n.kt)("h2",r({},{id:"starttransaction"}),".startTransaction()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".startTransaction()"),"\n| Par\xe1metros | Type |  | Descripci\xf3n                                                |\n| ---------- | ---- |  | ---------------------------------------------------------- |\n|            |      |  | Does not require any parameters|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-12"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".startTransaction()")," function starts a transaction in the current process on the database matching the datastore to which it applies. Todos los cambios realizados en las entidades del almac\xe9n de datos en el proceso de la transacci\xf3n se almacenan temporalmente hasta que la transacci\xf3n se valida o se cancela."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Si se llama a este m\xe9todo en el almac\xe9n de datos principal (es decir, el almac\xe9n de datos devuelto por el comando ",(0,n.kt)("inlineCode",{parentName:"p"},"ds"),"), la transacci\xf3n se aplica a todas las operaciones realizadas en el almac\xe9n de datos principal y en la base de datos subyacente, incluyendo por tanto ORDA y los lenguajes cl\xe1sicos.")),(0,n.kt)("p",null,"Puede anidar varias transacciones (subtransacciones). Cada transacci\xf3n o sub-transacci\xf3n debe ser eventualmente cancelada o validada. Note que si se cancela la transacci\xf3n principal, tambi\xe9n se cancelan todas sus subtransacciones, aunque se hayan validado individualmente mediante la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".validateTransaction()"),"."),(0,n.kt)("h4",r({},{id:"ejemplo-9"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connect; $status : Object\n var $person : cs.PersonsEntity\n var $ds : cs.DataStore\n var $choice : Text\n var $error : Boolean\n\n Case of\n    :($choice="local")\n       $ds:=ds\n    :($choice="remote")\n       $connect:=New object("hostname";"111.222.3.4:8044")\n       $ds:=Open datastore($connect;"myRemoteDS")\n End case\n\n $ds.startTransaction()\n $person:=$ds.Persons.query("lastname=:1";"Peters").first()\n\n If($person#Null)\n    $person.lastname:="Smith"\n    $status:=$person.save()\n End if\n ...\n ...\n If($error)\n    $ds.cancelTransaction()\n Else\n    $ds.validateTransaction()\n End if\n')),(0,n.kt)("h2",r({},{id:"stoprequestlog"}),".stopRequestLog()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".stopRequestLog()"),(0,n.kt)("br",{parentName:"p"}),"\n","| Par\xe1metros | Type |  | Descripci\xf3n                                                |\n| ---------- | ---- |  | ---------------------------------------------------------- |\n|            |      |  | Does not require any parameters|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-13"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".stopRequestLog()")," function stops any logging of ORDA requests on the client side (in file or in memory). Es particularmente \xfatil cuando se registra un archivo, ya que realmente cierra el documento abierto en el disco."),(0,n.kt)("p",null,"Esta funci\xf3n debe ser llamada en un 4D remoto, de lo contrario no hace nada. Est\xe1 dise\xf1ado para fines de depuraci\xf3n en configuraciones cliente/servidor."),(0,n.kt)("h4",r({},{id:"ejemplo-10"}),"Ejemplo"),(0,n.kt)("p",null,"Ver ejemplos de ",(0,n.kt)("a",r({parentName:"p"},{href:"#startrequestlog"}),(0,n.kt)("inlineCode",{parentName:"a"},".startRequestLog()")),"."),(0,n.kt)("h2",r({},{id:"validatetransaction"}),".validateTransaction()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".validateTransaction()"),(0,n.kt)("br",{parentName:"p"}),"\n","| Par\xe1metros | Type |  | Descripci\xf3n                                                |\n| ---------- | ---- |  | ---------------------------------------------------------- |\n|            |      |  | Does not require any parameters|\n|"),(0,n.kt)("h4",r({},{id:"descripci\xf3n-14"}),"Descripci\xf3n"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".validateTransaction()")," function accepts the transaction that was started with ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()"))," at the corresponding level on the specified datastore."),(0,n.kt)("p",null,"La funci\xf3n guarda los cambios en los datos del almac\xe9n de datos que se produjeron durante la transacci\xf3n."),(0,n.kt)("p",null,"Puede anidar varias transacciones (subtransacciones). Si se cancela la transacci\xf3n principal, tambi\xe9n se cancelan todas sus subtransacciones, aunque se hayan validado individualmente utilizando esta funci\xf3n."),(0,n.kt)("h4",r({},{id:"ejemplo-11"}),"Ejemplo"),(0,n.kt)("p",null,"Ver el ejemplo de ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()")),"."))}m.isMDXComponent=!0}}]);