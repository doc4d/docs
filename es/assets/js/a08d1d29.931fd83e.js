"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4572],{409889:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>r});var a=s(474848),o=s(28453);const t={id:"get-database-measures",title:"Get database measures",slug:"/commands/get-database-measures",displayed_sidebar:"docs"},d=void 0,i={id:"commands-legacy/get-database-measures",title:"Get database measures",description:"Get database measures {( opciones )} -> Resultado",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/commands-legacy/get-database-measures.md",sourceDirName:"commands-legacy",slug:"/commands/get-database-measures",permalink:"/docs/es/next/commands/get-database-measures",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fget-database-measures.md%20(current)&body=Please%20enter%20your%20comment%3A",tags:[],version:"current",frontMatter:{id:"get-database-measures",title:"Get database measures",slug:"/commands/get-database-measures",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"Get database localization",permalink:"/docs/es/next/commands/get-database-localization"},next:{title:"Get database parameter",permalink:"/docs/es/next/commands/get-database-parameter"}},l={},r=[{value:"Descripci\xf3n",id:"descripci\xf3n",level:4},{value:"Presentaci\xf3n del objeto devuelto",id:"presentaci\xf3n-del-objeto-devuelto",level:5},{value:"Propiedades elementales",id:"propiedades-elementales",level:5},{value:"dataSegment1 y indexSegment",id:"datasegment1-y-indexsegment",level:5},{value:"tables",id:"tables",level:5},{value:"indexes",id:"indexes",level:5},{value:"Par\xe1metro options",id:"par\xe1metro-options",level:5},{value:"Cliente/servidor y componentes",id:"clienteservidor-y-componentes",level:5},{value:"Ejemplo 1",id:"ejemplo-1",level:4},{value:"Ejemplo 2",id:"ejemplo-2",level:4},{value:"Ejemplo 3",id:"ejemplo-3",level:4}];function c(e){const n={br:"br",code:"code",em:"em",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Get database measures"})," {( ",(0,a.jsx)(n.em,{children:"opciones"})," )} -> Resultado"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Par\xe1metro"}),(0,a.jsx)(n.th,{children:"Tipo"}),(0,a.jsx)(n.th,{}),(0,a.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"opciones"}),(0,a.jsx)(n.td,{children:"Objeto"}),(0,a.jsx)(n.td,{children:"\ud83e\udc52"}),(0,a.jsx)(n.td,{children:"Opciones de retorno"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Resultado"}),(0,a.jsx)(n.td,{children:"Objeto"}),(0,a.jsx)(n.td,{children:"\ud83e\udc50"}),(0,a.jsx)(n.td,{children:"Objeto que contiene las medidas de la base"})]})]})]}),"\n",(0,a.jsx)(n.h4,{id:"descripci\xf3n",children:"Descripci\xf3n"}),"\n",(0,a.jsxs)(n.p,{children:["El comando ",(0,a.jsx)(n.strong,{children:"Get database measures"})," le permite obtener informaci\xf3n detallada acerca de los eventos del motor de base de datos 4D. La informaci\xf3n reenviada incluye los accesos lectura/escritura a los datos desde/hacia el disco o la memoria cach\xe9, as\xed como tambi\xe9n la utilizaci\xf3n de los \xedndices de la base, las b\xfasquedas y las ordenaciones."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Get database measures"})," devuelve un \xfanico objeto que contiene todas las medidas relevantes. El par\xe1metro ",(0,a.jsx)(n.em,{children:"opciones"})," le permite configurar las opciones para la informaci\xf3n devuelta."]}),"\n",(0,a.jsx)(n.h5,{id:"presentaci\xf3n-del-objeto-devuelto",children:"Presentaci\xf3n del objeto devuelto"}),"\n",(0,a.jsx)(n.p,{children:'El objeto devuelto contiene una sola propiedad llamada "DB", que tiene la siguiente estructura b\xe1sica:'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-RAW",children:'{\xa0\xa0\xa0 "DB": {\xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "dataSegment1": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "indexSegment": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "tables": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "indexes": {\u2026}\xa0\xa0\xa0 }}\n'})}),"\n",(0,a.jsx)(n.p,{children:'Este objeto est\xe1 compuesto de ocho propiedades que contienen las medidas b\xe1sicas ("diskReadBytes", "cacheReadBytes", "cacheMissBytes", "diskWriteBytes", "diskReadCount", "cacheReadCount", "cacheMissCount", "diskWriteCount") y propiedades adicionales ("dataSegment1 "," indexSegment ", "tables", "index") que tambi\xe9n pueden contener propiedades elementales, pero a un nivel diferente y con un alcance diferente (ver m\xe1s adelante).'}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Nota"}),': una propiedad s\xf3lo est\xe1 presente en el interior del objeto si \xe9ste recibe contenido. Cuando una propiedad no tiene ning\xfan contenido, no est\xe1 incluida en el objeto. Por ejemplo, si la base se ha abierto en modo de s\xf3lo lectura y los \xedndices no se han utilizado, el objeto devuelto no contendr\xe1 "diskWriteBytes", "diskWriteCount", "indexSegment" e "indexes".']}),"\n",(0,a.jsx)(n.h5,{id:"propiedades-elementales",children:"Propiedades elementales"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-undefined",children:'"diskReadBytes": {\n\xa0\xa0\xa0 "value": 33486473620,\n\xa0\xa0\xa0 "history": [\xa0\xa0\xa0 \xa0\xa0\xa0 // optional\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0 {"value": 52564,"time": -1665},\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0 {"value": 54202,"time": -1649},\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \u2026\n\xa0\xa0\xa0 ]\n}\n'})}),"\n",(0,a.jsx)(n.h5,{id:"datasegment1-y-indexsegment",children:"dataSegment1 y indexSegment"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-undefined",children:'{\n"DB": {\n"diskReadBytes": {\n\xa0\xa0\xa0 "value": 718260\n\xa0\xa0\xa0 },\n"diskReadCount": {\n\xa0\xa0\xa0 "value": 229\n\xa0\xa0\xa0 },\n\n"dataSegment1": {\n\xa0\xa0\xa0 "diskReadBytes": {\n\xa0\xa0\xa0 "value": 679092\n\xa0\xa0\xa0 },\n\xa0\xa0\xa0 "diskReadCount": {\n\xa0\xa0\xa0 "value": 212\n\xa0\xa0\xa0 }\n\xa0\xa0\xa0 },\n"indexSegment": {\n\xa0\xa0\xa0 "diskReadBytes": {\n\xa0\xa0\xa0 "value": 39168\n\xa0\xa0\xa0 },\n\xa0\xa0\xa0 "diskReadCount": {\n\xa0\xa0\xa0 "value": 17\n\xa0\xa0\xa0 }\n}\n'})}),"\n",(0,a.jsx)(n.h5,{id:"tables",children:"tables"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-undefined",children:'"tables": {\n\xa0\xa0 \xa0"Employees": {\u2026)\n\xa0\xa0 \xa0"Companies": {\u2026)\n\xa0\xa0 \xa0}\n'})}),"\n",(0,a.jsx)(n.h5,{id:"indexes",children:"indexes"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-undefined",children:'"indexes": {\n\xa0\xa0\xa0 "Employees": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 "EmpLastName": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadBytes": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadBytes": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissBytes": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteBytes": {\u2026},\n\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadCount": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadCount": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissCount": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteCount": {\u2026}\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 \xa0\xa0\xa0 "EmpLastName (Keyword)": {...},\n\xa0\xa0\xa0 \xa0\xa0\xa0 "index3Name": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 "index4Name": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \u2026\n\xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 \xa0\xa0\xa0 "Companies": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "Name": \n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 (...)\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "queryCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 41\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "sortCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 3\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "insertKeyCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 2\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "deleteKeyCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 16\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 table3Name: {\u2026}\n}\n'})}),"\n",(0,a.jsx)(n.h5,{id:"par\xe1metro-options",children:"Par\xe1metro options"}),"\n",(0,a.jsxs)(n.p,{children:["El par\xe1metro ",(0,a.jsx)(n.em,{children:"opciones"})," le permite personalizar la informaci\xf3n real que devuelve el comando. En ",(0,a.jsx)(n.em,{children:"opciones"}),', se pasa un objeto que puede contener hasta tres propiedades: "withHistory", "historyLength" y "path".']}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:(0,a.jsx)(n.strong,{children:"Propiedad"})}),(0,a.jsx)(n.th,{children:(0,a.jsx)(n.strong,{children:"Tipo"})}),(0,a.jsx)(n.th,{children:(0,a.jsx)(n.strong,{children:"Descripci\xf3n"})})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:'"withHistory"'}),(0,a.jsx)(n.td,{children:"Booleano"}),(0,a.jsx)(n.td,{children:'"true" significa que el objeto "history" ser\xe1 devuelto por la funci\xf3n dentro del objeto devuelto; "false" significa que el objeto devuelto por la funci\xf3n no contendr\xe1 el objeto "history"'})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:'"historyLength"'}),(0,a.jsx)(n.td,{children:"n\xfamero"}),(0,a.jsx)(n.td,{children:"Define el tama\xf1o del array history devuelto en segundos(*)."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:'"path"'}),(0,a.jsx)(n.td,{children:"cadena|array de cadenas"}),(0,a.jsx)(n.td,{children:'Ruta completa de la propiedad espec\xedfica o array de rutas completas de las propiedades espec\xedficas que desea obtener. Si pasa una cadena, s\xf3lo el valor correspondiente se devuelve en el objeto "DB" (si la ruta es v\xe1lida). Ejemplo "DB.tables.Employees.records.diskWriteBytes". Cuando se pasa un array de cadenas, todos los valores correspondientes son devueltos en el objeto "DB" (si las rutas son v\xe1lidas). Ejemplo: ["DB.tables.Employee.records.diskWriteBytes", "DB.tables.Employee.records.diskReadCount","DB.dataSegment1.diskReadBytes"]'})]})]})]}),"\n",(0,a.jsxs)(n.p,{children:['(*) Como se describi\xf3 anteriormente, la historia no se almacena como una secuencia de segundos, sino s\xf3lo con valores relevantes. Si no ocurre nada durante un par de segundos o m\xe1s, nada se almacena y una brecha aparecer\xe1 en el array de historial interno. "time" puede contener, por ejemplo, -2, -4, -5, -10, -15, -30 con valores de 200, 300, 250, 400, 500,150. Si la propiedad "historyLength" est\xe1 definida en 600 (10 minutos), luego el array devuelto contendr\xe1 0, -1, -2, -3 ... -599 para "time" y s\xf3lo los valores -2, -4, - 5, -10, -15, -30 se llenar\xe1n. Todos los dem\xe1s valores se pondr\xe1n en 0 (cero) como valor. Tambi\xe9n como se describi\xf3 anteriormente, el \xfanico l\xedmite del array interno es el tama\xf1o (200), no el tiempo. Esto significa que si hay una baja actividad para una propiedad espec\xedfica, el tiempo m\xe1s antiguo puede ser muy grande (por ejemplo: -3600 para hace una hora). Tambi\xe9n puede contener menos de 200 valores si la base se acaba de iniciar. En estos casos, si el tiempo del historial interno es menor al solicitado o si todos los valores importantes que ya se han definido en el array devuelto, el valor devuelto ser\xe1 -1.',(0,a.jsx)(n.br,{}),'\nEjemplo: la base s\xf3lo se inici\xf3 hace 20 segundos y la historia de la petici\xf3n es de 60 segundos. Los valores devueltos entre 0 y -20 se definen con valores o ceros y los otros se establecer\xe1n con -1. Cuando un valor "-1" se devuelve, esto significa que, o bien el tiempo de solicitud es demasiado antiguo o que el valor ya no est\xe1 en el array de historia interna (es decir, se ha llegado al l\xedmite de los 200 elementos y se han eliminado los valores mayores).']}),"\n",(0,a.jsx)(n.h5,{id:"clienteservidor-y-componentes",children:"Cliente/servidor y componentes"}),"\n",(0,a.jsx)(n.p,{children:"Este comando devuelve la informaci\xf3n sobre el uso de la base de datos. Esto significa que le devuelve un objeto v\xe1lido con valores relevantes s\xf3lo cuando se le llama:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"en modo local 4D (si se llama desde un componente, devuelve informaci\xf3n acerca de la base de datos del host)"}),"\n",(0,a.jsx)(n.li,{children:"en el servidor en modo cliente/servidor."}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Si el comando se llama desde un 4D remoto, luego el objeto se deja vac\xedo.",(0,a.jsx)(n.br,{}),'\nEn este contexto, si necesita obtener informaci\xf3n acerca de la base de datos en el servidor, la forma m\xe1s sencilla de realizar esta acci\xf3n es crear un m\xe9todo con la opci\xf3n "ejecutar en el servidor" activada.',(0,a.jsx)(n.br,{}),"\nEste principio tambi\xe9n funciona para un componente: si el componente se utiliza en un contexto local 4D, devolver\xe1 la informaci\xf3n sobre la base local; en un contexto 4D remoto, devolver\xe1 la informaci\xf3n sobre la base del servidor."]}),"\n",(0,a.jsx)(n.h4,{id:"ejemplo-1",children:"Ejemplo 1"}),"\n",(0,a.jsx)(n.p,{children:'Usted desea obtener el objeto "history" en el objeto devuelto:'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-4d",children:'\xa0var $param : Object\n\xa0var $measures : Object\n\xa0OB SET($param;"withHistory";True)\n\xa0$measures:=Get database measures($param)\n'})}),"\n",(0,a.jsx)(n.h4,{id:"ejemplo-2",children:"Ejemplo 2"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-undefined",children:'{\n\xa0\xa0\xa0 "DB": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadBytes": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 9516637\n\xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 }\n}\n'})}),"\n",(0,a.jsx)(n.h4,{id:"ejemplo-3",children:"Ejemplo 3"}),"\n",(0,a.jsx)(n.p,{children:"Queremos obtener las medidas de bytes de cach\xe9 en los \xfaltimos dos minutos:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-4d",children:'\xa0var $oParams : Object\n\xa0var $measures : Object\n\xa0OB SET($oParams;"path";"DB.cacheReadBytes")\n\xa0OB SET($oParams;"withHistory";True)\n\xa0OB SET($oParams;"historyLength";2*60)\n\xa0$measures:=Get database measures($oParams)\n'})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>i});var a=s(296540);const o={},t=a.createContext(o);function d(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);