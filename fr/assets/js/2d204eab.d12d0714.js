"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[21903],{23481:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var t=n(474848),a=n(28453);const r={id:"get-database-measures",title:"Get database measures",slug:"/commands/get-database-measures",displayed_sidebar:"docs"},i=void 0,l={id:"commands-legacy/get-database-measures",title:"Get database measures",description:"Get database measures {( options )} -> R\xe9sultat",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/commands-legacy/get-database-measures.md",sourceDirName:"commands-legacy",slug:"/commands/get-database-measures",permalink:"/docs/fr/next/commands/get-database-measures",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fget-database-measures.md%20(current)&body=Please%20enter%20your%20comment%3A",tags:[],version:"current",frontMatter:{id:"get-database-measures",title:"Get database measures",slug:"/commands/get-database-measures",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"Get database localization",permalink:"/docs/fr/next/commands/get-database-localization"},next:{title:"Get database parameter",permalink:"/docs/fr/next/commands/get-database-parameter"}},d={},o=[{value:"Description",id:"description",level:4},{value:"Pr\xe9sentation de l&#39;objet retourn\xe9",id:"pr\xe9sentation-de-lobjet-retourn\xe9",level:5},{value:"Propri\xe9t\xe9s \xe9l\xe9mentaires",id:"propri\xe9t\xe9s-\xe9l\xe9mentaires",level:5},{value:"dataSegment1 et indexSegment",id:"datasegment1-et-indexsegment",level:5},{value:"tables",id:"tables",level:5},{value:"indexes",id:"indexes",level:5},{value:"Param\xe8tre options",id:"param\xe8tre-options",level:5},{value:"Client/serveur et composants",id:"clientserveur-et-composants",level:5},{value:"Exemple 1",id:"exemple-1",level:4},{value:"Exemple 2",id:"exemple-2",level:4},{value:"Exemple 3",id:"exemple-3",level:4}];function u(e){const s={br:"br",code:"code",em:"em",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Get database measures"})," {( ",(0,t.jsx)(s.em,{children:"options"})," )} -> R\xe9sultat"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Param\xe8tre"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"options"}),(0,t.jsx)(s.td,{children:"Object"}),(0,t.jsx)(s.td,{children:"\ud83e\udc52"}),(0,t.jsx)(s.td,{children:"Options de retour"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"R\xe9sultat"}),(0,t.jsx)(s.td,{children:"Object"}),(0,t.jsx)(s.td,{children:"\ud83e\udc50"}),(0,t.jsx)(s.td,{children:"Objet contenant des mesures sur la base"})]})]})]}),"\n",(0,t.jsx)(s.h4,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(s.p,{children:["La commande ",(0,t.jsx)(s.strong,{children:"Get database measures"})," vous permet d'obtenir un ensemble d'informations d\xe9taill\xe9es sur les \xe9v\xe9nements du moteur de base de donn\xe9es de 4D. Les informations renvoy\xe9es concernent les acc\xe8s en lecture/\xe9criture aux donn\xe9es depuis ou vers le disque ou le cache ainsi que l'utilisation des index de la base, les recherches et les tris."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Get database measures"})," retourne un seul objet contenant toutes les mesures utiles. Le param\xe8tre ",(0,t.jsx)(s.em,{children:"options"})," vous permet de param\xe9trer les informations retourn\xe9es."]}),"\n",(0,t.jsx)(s.h5,{id:"pr\xe9sentation-de-lobjet-retourn\xe9",children:"Pr\xe9sentation de l'objet retourn\xe9"}),"\n",(0,t.jsx)(s.p,{children:'L\'objet retourn\xe9 par la commande contient une seule propri\xe9t\xe9, nomm\xe9e "DB", dont la structure est la suivante :'}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-RAW",children:'{\xa0\xa0\xa0 "DB": {\xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteBytes": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteCount": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "dataSegment1": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "indexSegment": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "tables": {\u2026},\xa0\xa0\xa0 \xa0\xa0\xa0 "indexes": {\u2026}\xa0\xa0\xa0 }}\n'})}),"\n",(0,t.jsx)(s.p,{children:'Cet objet est compos\xe9 de huit propri\xe9t\xe9s \xe9l\xe9mentaires qui contiennent les mesures de base ("diskReadBytes", "cacheReadBytes", "cacheMissBytes", "diskWriteBytes", "diskReadCount", "cacheReadCount", "cacheMissCount", "diskWriteCount") ainsi que des propri\xe9t\xe9s additionnelles ("dataSegment1", "indexSegment", "tables", "index") qui peuvent elles-m\xeames contenir les propri\xe9t\xe9s \xe9l\xe9mentaires mais appliqu\xe9es \xe0 des niveaux diff\xe9rents (voir ci-dessous).'}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Note :"}),' Une propri\xe9t\xe9 est pr\xe9sente dans l\'objet uniquement si elle contient des valeurs. Lorsqu\'une propri\xe9t\xe9 est vide, elle n\'est pas incluse dans l\'objet. Par exemple, si la base a \xe9t\xe9 ouverte en mode lecture seulement et que les index n\'ont pas \xe9t\xe9 sollicit\xe9s, l\'objet retourn\xe9 ne contiendra pas les propri\xe9t\xe9s "diskWriteBytes", "diskWriteCount", "indexSegment" et "indexes".']}),"\n",(0,t.jsx)(s.h5,{id:"propri\xe9t\xe9s-\xe9l\xe9mentaires",children:"Propri\xe9t\xe9s \xe9l\xe9mentaires"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-undefined",children:'"diskReadBytes": {\n\xa0\xa0\xa0 "value": 33486473620,\n\xa0\xa0\xa0 "history": [\xa0\xa0\xa0 \xa0\xa0\xa0 // optionnel\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0 {"value": 52564,"time": -1665},\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0 {"value": 54202,"time": -1649},\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \u2026\n\xa0\xa0\xa0 ]\n}\n'})}),"\n",(0,t.jsx)(s.h5,{id:"datasegment1-et-indexsegment",children:"dataSegment1 et indexSegment"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-undefined",children:'{\n"DB": {\n"diskReadBytes": {\n\xa0\xa0\xa0 "value": 718260\n\xa0\xa0\xa0 },\n"diskReadCount": {\n\xa0\xa0\xa0 "value": 229\n\xa0\xa0\xa0 },\n\n"dataSegment1": {\n\xa0\xa0\xa0 "diskReadBytes": {\n\xa0\xa0\xa0 "value": 679092\n\xa0\xa0\xa0 },\n\xa0\xa0\xa0 "diskReadCount": {\n\xa0\xa0\xa0 "value": 212\n\xa0\xa0\xa0 }\n\xa0\xa0\xa0 },\n"indexSegment": {\n\xa0\xa0\xa0 "diskReadBytes": {\n\xa0\xa0\xa0 "value": 39168\n\xa0\xa0\xa0 },\n\xa0\xa0\xa0 "diskReadCount": {\n\xa0\xa0\xa0 "value": 17\n\xa0\xa0\xa0 }\n}\n'})}),"\n",(0,t.jsx)(s.h5,{id:"tables",children:"tables"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-undefined",children:'"tables": {\n\xa0\xa0 \xa0"Employees": {\u2026)\n\xa0\xa0 \xa0"Companies": {\u2026)\n\xa0\xa0 \xa0}\n'})}),"\n",(0,t.jsx)(s.h5,{id:"indexes",children:"indexes"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-undefined",children:'"indexes": {\n\xa0\xa0\xa0 "Employees": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 "EmpLastName": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadBytes": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadBytes": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissBytes": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteBytes": {\u2026},\n\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskReadCount": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadCount": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "cacheMissCount": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "diskWriteCount": {\u2026}\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 \xa0\xa0\xa0 "EmpLastName (Keyword)": {...},\n\xa0\xa0\xa0 \xa0\xa0\xa0 "index3Name": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 "index4Name": {\u2026},\n\xa0\xa0\xa0 \xa0\xa0\xa0 \u2026\n\xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 \xa0\xa0\xa0 "Companies": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "Name": \n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 (...)\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "queryCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 41\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "sortCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 3\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "insertKeyCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 2\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "deleteKeyCount": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 16\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 table3Name: {\u2026}\n}\n'})}),"\n",(0,t.jsx)(s.h5,{id:"param\xe8tre-options",children:"Param\xe8tre options"}),"\n",(0,t.jsxs)(s.p,{children:["Le param\xe8tre ",(0,t.jsx)(s.em,{children:"options"})," vous permet de personnaliser les informations retourn\xe9es par la commande. Dans ",(0,t.jsx)(s.em,{children:"options"}),', vous devez passer un objet pouvant contenir jusqu\'\xe0 trois propri\xe9t\xe9s : "withHistory", "historyLength" et "path".']}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Propri\xe9t\xe9"})}),(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Type"})}),(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Description"})})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:'"withHistory"'}),(0,t.jsx)(s.td,{children:"Bool\xe9en"}),(0,t.jsx)(s.td,{children:'"true" signifie que l\'objet "history" devra \xeatre retourn\xe9 par la commande; "false" signifie que l\'objet retourn\xe9 ne devra pas contenir d\'objet "history"'})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:'"historyLength"'}),(0,t.jsx)(s.td,{children:"num\xe9rique"}),(0,t.jsx)(s.td,{children:'D\xe9finit la taille en secondes du tableau "history" retourn\xe9(*).'})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:'"path"'}),(0,t.jsx)(s.td,{children:"cha\xeene | tableau de cha\xeenes"}),(0,t.jsx)(s.td,{children:'Chemin complet de la propri\xe9t\xe9 sp\xe9cifique ou tableau de chemins complets des propri\xe9t\xe9s sp\xe9cifiques que vous voulez obtenir. Si vous passez une cha\xeene, seule la valeur correspondante est retourn\xe9e dans l\'objet "DB" (si le chemin est valide). Exemple : "DB.tables.Employees.records.diskWriteBytes". Si vous passez un tableau de cha\xeenes, seules les valeurs correspondantes sont retourn\xe9es dans l\'objet "DB" (si les chemins sont valides). Exemple : ["DB.tables.Employee.records.diskWriteBytes", "DB.tables.Employee.records.diskReadCount","DB.dataSegment1.diskReadBytes"]'})]})]})]}),"\n",(0,t.jsxs)(s.p,{children:['(*) Comme d\xe9crit pr\xe9c\xe9demment, l\'historique n\'est pas stock\xe9 sous forme d\'une s\xe9quence de secondes mais uniquement sous forme de valeurs remarquables. Si rien ne se produit durant deux secondes ou plus, rien n\'est stock\xe9 et une rupture appara\xeet dans le tableau "history". Par exemple, "time" peut contenir -2, -4, -5, -10, -15, -30 avec des valeurs "value" 200, 300, 250, 400, 500,150. Si la propri\xe9t\xe9 "historyLength" est fix\xe9e \xe0 600 (10 minutes), le tableau retourn\xe9 contiendra 0, -1, -2, -3 \u2026 -599 pour "time", et seules les propri\xe9t\xe9s "value" des secondes -2, -4, -5, -10, -15, -30 seront remplies. Toutes les autres propri\xe9t\xe9s "value" auront pour valeur 0 (z\xe9ro). De plus, comme d\xe9crit \xe9galement, la seule limite du tableau d\'historique interne est sa taille (200 \xe9l\xe9ments), et non le temps. Cela signifie que s\'il y a une activit\xe9 r\xe9duite pour une propri\xe9t\xe9 sp\xe9cifique, le moment le plus ancien peut \xeate tr\xe8s \xe9loign\xe9 (p.e. -3600 pour il y a une heure). Il peut \xe9galement contenir moins de 200 valeurs si la base vient juste d\'\xeatre lanc\xe9e. Dans ces cas, si l\'heure interne de l\'historique est plus r\xe9cent que celui demand\xe9 OU si toutes les valeurs remarquables ont d\xe9j\xe0 ajout\xe9es au tableau retourn\xe9, la valeur retourn\xe9e sera -1.',(0,t.jsx)(s.br,{}),"\nExemple : La base a \xe9t\xe9 d\xe9marr\xe9e il y a 20 secondes et la taille demand\xe9e du tableau \"history\" est de 60 secondes. Les donn\xe9es retourn\xe9es entre 0 et -20 seront bien constitu\xe9es de valeurs et de 0, et les autres valeurs serront -1. Lorsqu'une valeur \"-1\" est retourn\xe9e, cela signifie soit que le temps demand\xe9 est top ancien, soit que la valeur n'est plus dans le tableau d'historique interne (c'est-\xe0-dire que la limite des 200 \xe9l\xe9ments a \xe9t\xe9 atteinte et que les valeurs plus anciennes ont \xe9t\xe9 supprim\xe9es)."]}),"\n",(0,t.jsx)(s.h5,{id:"clientserveur-et-composants",children:"Client/serveur et composants"}),"\n",(0,t.jsx)(s.p,{children:"Cette commande retourne des informations relatives \xe0 l'utilisation de la base de donn\xe9es. Cela signifie qu'elle ne retourne un objet valide contenant des valeurs significatives uniquement lorsqu'elle est appel\xe9e :"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"4D en mode local (lorsqu'elle est appel\xe9e depuis un composant, elle retourne les donn\xe9es de la base h\xf4te),"}),"\n",(0,t.jsx)(s.li,{children:"sur le serveur en mode client/serveur."}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Si la commande est appel\xe9e depuis un 4D distant en mode client/serveur, l'objet est retourn\xe9 vide.",(0,t.jsx)(s.br,{}),"\nDans ce contexte, si vous souhaitez obtenir des informations sur le serveur, le plus simple est de cr\xe9er une m\xe9thode et d'activer l'option \"Ex\xe9cuter sur serveur\". Ce principe fonctionne aussi pour un composant : si le composant est utilis\xe9 dans un contexte local, la commande retourne des informations sur la base h\xf4te ; dans un contexte de 4D distant, elle retourne des informations sur la base du serveur."]}),"\n",(0,t.jsx)(s.h4,{id:"exemple-1",children:"Exemple 1"}),"\n",(0,t.jsx)(s.p,{children:"Vous souhaitez obtenir l'objet \"history\" dans l'objet retourn\xe9 :"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-4d",children:'\xa0var $param : Object\n\xa0var $measures : Object\n\xa0OB SET($param;"withHistory";True)\n\xa0$measures:=Get database measures($param)\n'})}),"\n",(0,t.jsx)(s.h4,{id:"exemple-2",children:"Exemple 2"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-undefined",children:'{\n\xa0\xa0\xa0 "DB": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 "cacheReadBytes": {\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "value": 9516637\n\xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 }\n}\n'})}),"\n",(0,t.jsx)(s.h4,{id:"exemple-3",children:"Exemple 3"}),"\n",(0,t.jsx)(s.p,{children:"Vous souhaitez obtenir les mesures d'octets lus dans le cache au cours des deux derni\xe8res minutes :"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-4d",children:'\xa0var $oParams : Object\n\xa0var $measures : Object\n\xa0OB SET($oParams;"path";"DB.cacheReadBytes")\n\xa0OB SET($oParams;"withHistory";True)\n\xa0OB SET($oParams;"historyLength";2*60)\n\xa0$measures:=Get database measures($oParams)\n'})})]})}function c(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>l});var t=n(296540);const a={},r=t.createContext(a);function i(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);