"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[59754],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>d});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=c(t),d=a,f=m["".concat(l,".").concat(d)]||m[d]||p[d]||o;return t?r.createElement(f,i(i({ref:n},u),{},{components:t})):r.createElement(f,i({ref:n},u))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=m;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=t[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},61184:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>u});t(67294);var r=t(3905);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},a.apply(this,arguments)}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}const i={id:"atomic_$atonce",title:"$atomic/$atonce"},s=void 0,l={unversionedId:"REST/atomic_$atonce",id:"version-19-R6/REST/atomic_$atonce",title:"$atomic/$atonce",description:"Autorise les actions d'une requ\xeate REST \xe0 faire partie d'une transaction. Si aucune erreur n'est g\xe9n\xe9r\xe9e, la transaction est valid\xe9e. Sinon, la transaction est annul\xe9e.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-19-R6/REST/$atomic_$atonce.md",sourceDirName:"REST",slug:"/REST/atomic_$atonce",permalink:"/docs/fr/REST/atomic_$atonce",draft:!1,tags:[],version:"19-R6",frontMatter:{id:"atomic_$atonce",title:"$atomic/$atonce"},sidebar:"docs",previous:{title:"$asArray",permalink:"/docs/fr/REST/asArray"},next:{title:"$attributes",permalink:"/docs/fr/REST/attributes"}},c={},u=[{value:"Description",id:"description",level:2},{value:"Exemple",id:"exemple",level:2}],p={toc:u};function m(e){var{components:n}=e,t=o(e,["components"]);return(0,r.kt)("wrapper",a({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Autorise les actions d'une requ\xeate REST \xe0 faire partie d'une transaction. Si aucune erreur n'est g\xe9n\xe9r\xe9e, la transaction est valid\xe9e. Sinon, la transaction est annul\xe9e."),(0,r.kt)("h2",a({},{id:"description"}),"Description"),(0,r.kt)("p",null,"Lorsque plusieurs actions sont r\xe9unies, vous pouvez utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"$atomic/$atonce")," pour vous assurer qu'aucune action ne se r\xe9alise si l'une d'elle \xe9choue. Vous pouvez utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"$atomic")," ou ",(0,r.kt)("inlineCode",{parentName:"p"},"$atonce"),"."),(0,r.kt)("h2",a({},{id:"exemple"}),"Exemple"),(0,r.kt)("p",null,"Nous appelons la requ\xeate REST suivante dans une transaction."),(0,r.kt)("p",null," ",(0,r.kt)("inlineCode",{parentName:"p"},"POST  /rest/Employee?$method=update&$atomic=true")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Donn\xe9es POST")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{}),'[\n{\n    "__KEY": "200",\n    "firstname": "John"\n},\n{\n    "__KEY": "201",\n    "firstname": "Harry"\n}\n]\n')),(0,r.kt)("p",null,"Nous obtenons l'erreur suivante dans la deuxi\xe8me entit\xe9 ; la premi\xe8re entit\xe9 n'est donc pas sauvegard\xe9e :"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{}),'{\n    "__STATUS": {\n        "success": true\n    },\n    "__KEY": "200",\n    "__STAMP": 1,\n    "uri": "/rest/Employee(200)",\n    "__TIMESTAMP": "!!2020-04-03!!",\n    "ID": 200,\n    "firstname": "John",\n    "lastname": "Keeling",\n    "isWoman": false,\n    "numberOfKids": 2,\n    "addressID": 200,\n    "gender": false,\n    "address": {\n        "__deferred": {\n            "uri": "/rest/Address(200)",\n            "__KEY": "200"\n        }\n    },\n    "__ERROR": [\n        {\n            "message": "Cannot find entity with \\"201\\" key in the \\"Employee\\" dataclass",\n            "componentSignature": "dbmg",\n            "errCode": 1542\n        }\n    ]\n}\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"M\xeame si le salaire de la premi\xe8re entit\xe9 porte la valeur 45000, cette valeur n'a pas \xe9t\xe9 sauvegard\xe9e sur le serveur et le timestamp (__STAMP)* n'a pas \xe9t\xe9 modifi\xe9. Si nous rechargeons l'entit\xe9, la valeur pr\xe9c\xe9dente s'affichera.")))}m.isMDXComponent=!0}}]);