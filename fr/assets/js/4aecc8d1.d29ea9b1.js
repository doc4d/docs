"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[14064],{603905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var s=n(667294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=s.createContext({}),u=function(e){var t=s.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return s.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},d=s.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,f=d["".concat(l,".").concat(m)]||d[m]||c[m]||r;return n?s.createElement(f,i(i({ref:t},p),{},{components:n})):s.createElement(f,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var u=2;u<r;u++)i[u]=n[u];return s.createElement.apply(null,i)}return s.createElement.apply(null,n)}d.displayName="MDXCreateElement"},643796:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>p});n(667294);var s=n(603905);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}function r(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const i={id:"datastores",title:"Remote datastores"},o=void 0,l={unversionedId:"ORDA/datastores",id:"ORDA/datastores",title:"Remote datastores",description:"A remote datastore is a reference, on a local 4D application (4D or 4D Server), to a datastore stored in another 4D application.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/ORDA/remoteDatastores.md",sourceDirName:"ORDA",slug:"/ORDA/datastores",permalink:"/docs/fr/next/ORDA/datastores",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20ORDA%2FremoteDatastores.md%20(current)&body=Please%20enter%20your%20comment%3A",tags:[],version:"current",frontMatter:{id:"datastores",title:"Remote datastores"},sidebar:"docs",previous:{title:"Using the Global Stamp",permalink:"/docs/fr/next/ORDA/global-stamp"},next:{title:"Privileges",permalink:"/docs/fr/next/ORDA/privileges"}},u={},p=[{value:"Using web sessions",id:"using-web-sessions",level:2},{value:"Visualiser les sessions",id:"visualiser-les-sessions",level:3},{value:"Fermeture des sessions",id:"fermeture-des-sessions",level:2},{value:"Verrouillage et transactions",id:"verrouillage-et-transactions",level:2}],c={toc:p};function d(e){var{components:t}=e,i=r(e,["components"]);return(0,s.kt)("wrapper",a({},c,i,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"A ",(0,s.kt)("strong",{parentName:"p"},"remote datastore")," is a reference, on a local 4D application (4D or 4D Server), to a ",(0,s.kt)("a",a({parentName:"p"},{href:"/docs/fr/next/ORDA/dsmapping#datastore"}),"datastore")," stored in another 4D application."),(0,s.kt)("p",null,"The local 4D application connects to and references the remote datastore through a call to the ",(0,s.kt)("a",a({parentName:"p"},{href:"/docs/fr/next/API/DataStoreClass#open-datastore"}),(0,s.kt)("inlineCode",{parentName:"a"},"Open datastore"))," command."),(0,s.kt)("p",null,"On the remote machine, 4D opens a ",(0,s.kt)("a",a({parentName:"p"},{href:"/docs/fr/next/WebServer/sessions"}),"session")," to handle requests from the application that call ",(0,s.kt)("inlineCode",{parentName:"p"},"Open datastore"),". Requests internally use the ",(0,s.kt)("a",a({parentName:"p"},{href:"/docs/fr/next/REST/gettingStarted"}),"REST API"),", which means that they might require ",(0,s.kt)("a",a({parentName:"p"},{href:"/docs/fr/next/REST/authUsers"}),"available licenses"),"."),(0,s.kt)("h2",a({},{id:"using-web-sessions"}),"Using web sessions"),(0,s.kt)("p",null,"When you work with a remote datastore referenced through calls to the ",(0,s.kt)("a",a({parentName:"p"},{href:"/docs/fr/next/API/DataStoreClass#open-datastore"}),(0,s.kt)("inlineCode",{parentName:"a"},"Open datastore"))," command, the connection with the requesting processes is handled via ",(0,s.kt)("a",a({parentName:"p"},{href:"/docs/fr/next/WebServer/sessions"}),"web sessions")," on the remote machine."),(0,s.kt)("p",null,"The web session created on the remote datastore is identified using a internal session ID which is associated to the ",(0,s.kt)("inlineCode",{parentName:"p"},"localID")," on the 4D application side. Cette session g\xe8re automatiquement l'acc\xe8s aux donn\xe9es, aux s\xe9lections d'entit\xe9s ou aux entit\xe9s."),(0,s.kt)("p",null,"Le ",(0,s.kt)("inlineCode",{parentName:"p"},"localID")," est local \xe0 la machine qui se connecte au datastore distant, ce qui signifie :"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Que si d'autres process de la m\xeame application doivent acc\xe9der au m\xeame datastore distant, ils peuvent utiliser le m\xeame ",(0,s.kt)("inlineCode",{parentName:"li"},"localID")," et partager alors la m\xeame session."),(0,s.kt)("li",{parentName:"ul"},"Que si un autre process de la m\xeame application ouvre le m\xeame datastore distant, mais avec un autre ",(0,s.kt)("inlineCode",{parentName:"li"},"localID"),", il cr\xe9era une nouvelle session sur le datastore distant."),(0,s.kt)("li",{parentName:"ul"},"Que si un autre poste se connecte au m\xeame datastore distant avec le m\xeame ",(0,s.kt)("inlineCode",{parentName:"li"},"localID"),", il cr\xe9era une autre session avec un autre cookie.")),(0,s.kt)("p",null,"Ces principes sont illustr\xe9s dans les graphiques suivants :"),(0,s.kt)("p",null,(0,s.kt)("img",{src:n(760206).Z,width:"962",height:"719"})),(0,s.kt)("h3",a({},{id:"visualiser-les-sessions"}),"Visualiser les sessions"),(0,s.kt)("p",null,"Les process qui g\xe8rent les sessions d'acc\xe8s aux datastore apparaissent dans la fen\xeatre d'administration de 4D Server :"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},'nom : "REST Handler : \\<nom du process',">",'"'),(0,s.kt)("li",{parentName:"ul"},"type : type Worker Server HTTP"),(0,s.kt)("li",{parentName:"ul"},"session : le nom de session est le nom d'utilisateur pass\xe9 \xe0 la commande ",(0,s.kt)("inlineCode",{parentName:"li"},"Open datastore"),".")),(0,s.kt)("p",null,"Dans l'exemple suivant, deux process sont en cours d'ex\xe9cution pour la m\xeame session :"),(0,s.kt)("p",null,(0,s.kt)("img",{src:n(866528).Z,width:"1402",height:"708"})),(0,s.kt)("h2",a({},{id:"fermeture-des-sessions"}),"Fermeture des sessions"),(0,s.kt)("p",null,"As described in the ",(0,s.kt)("a",a({parentName:"p"},{href:"/docs/fr/next/WebServer/sessions#session-lifetime"}),"session lifetime")," paragraph, a web session is automatically closed by 4D when there has been no activity during its timeout period. Le timeout par d\xe9faut est de 60 mn mais cette valeur peut \xeatre param\xe9tr\xe9e \xe0 l'aide du param\xe8tre ",(0,s.kt)("em",{parentName:"p"},"connectionInfo")," de la commande ",(0,s.kt)("inlineCode",{parentName:"p"},"Open datastore"),"."),(0,s.kt)("p",null,"Si une demande est envoy\xe9e au datastore distant apr\xe8s la fermeture de la session, elle est automatiquement recr\xe9\xe9e si possible (licence disponible, serveur non arr\xeat\xe9, etc.). However, keep in mind that the context of the session regarding locks and transactions is lost (see below)."),(0,s.kt)("h2",a({},{id:"verrouillage-et-transactions"}),"Verrouillage et transactions"),(0,s.kt)("p",null,"Les fonctionnalit\xe9s ORDA relatives au verrouillage d'entit\xe9 et aux transactions sont g\xe9r\xe9es au niveau du process dans les datastore distants, tout comme en mode client/serveur ORDA :"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Si un process verrouille une entit\xe9 \xe0 partir d'un datastore distant, l'entit\xe9 est verrouill\xe9e pour tous les autres process, m\xeame lorsque ces process partagent la m\xeame session (voir ",(0,s.kt)("a",a({parentName:"li"},{href:"/docs/fr/next/ORDA/entities#entity-locking"}),"Verrouillage d'entit\xe9s"),"). Si plusieurs entit\xe9s pointant vers le m\xeame enregistrement ont \xe9t\xe9 verrouill\xe9es dans un process, elles doivent toutes \xeatre d\xe9verrouill\xe9es dans le process pour supprimer le verrou. Si un verrou a \xe9t\xe9 mis sur une entit\xe9, il est supprim\xe9 lorsqu'il n'existe plus de r\xe9f\xe9rence \xe0 cette entit\xe9 en m\xe9moire."),(0,s.kt)("li",{parentName:"ul"},"Les transactions peuvent \xeatre lanc\xe9es, valid\xe9es ou annul\xe9es s\xe9par\xe9ment sur chaque datastore distant \xe0 l'aide des m\xe9thodes ",(0,s.kt)("inlineCode",{parentName:"li"},"dataStore.startTransaction( )"),", ",(0,s.kt)("inlineCode",{parentName:"li"},"dataStore.cancelTransaction( )"),", et ",(0,s.kt)("inlineCode",{parentName:"li"},"dataStore.validateTransaction( )"),". Elles n\u2019ont pas d\u2019incidences sur les autres datastore."),(0,s.kt)("li",{parentName:"ul"},"Les commandes classiques du langage 4D (",(0,s.kt)("inlineCode",{parentName:"li"},"START TRANSACTION"),", ",(0,s.kt)("inlineCode",{parentName:"li"},"VALIDATE TRANSACTION"),", ",(0,s.kt)("inlineCode",{parentName:"li"},"CANCEL TRANSACTION"),") s'appliquent uniquement au datastore principal (renvoy\xe9 par ",(0,s.kt)("inlineCode",{parentName:"li"},"ds"),"). Si une entit\xe9 d'un datastore distant est verrouill\xe9e par une transaction dans un process, les autres process ne peuvent pas la mettre \xe0 jour, m\xeame si ces process partagent la m\xeame session."),(0,s.kt)("li",{parentName:"ul"},"Les verrous sur les entit\xe9s sont supprim\xe9s et les transactions sont annul\xe9es :",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"lorsque le process est tu\xe9."),(0,s.kt)("li",{parentName:"ul"},"quand la session est ferm\xe9e sur le serveur"),(0,s.kt)("li",{parentName:"ul"},"lorsque la session est arr\xeat\xe9e \xe0 partir de la fen\xeatre d\u2019administration du serveur.")))))}d.isMDXComponent=!0},866528:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/sessionAdmin-fb7129cb6aaab939e9e8b20cb43bce8f.png"},760206:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/sessions-69775ca2d11bfdbc289284efe41c0b59.png"}}]);